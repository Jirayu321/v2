{"ast":null,"code":"/*\n * wysiwyg web editor\n *\n * suneditor.js\n * Copyright 2017 JiHong Lee.\n * MIT license.\n */\n'use strict';\n\n(function (global, factory) {\n  if (typeof module === 'object' && typeof module.exports === 'object') {\n    module.exports = global.document ? factory(global, true) : function (w) {\n      if (!w.document) {\n        throw new Error('SUNEDITOR_MODULES a window with a document');\n      }\n\n      return factory(w);\n    };\n  } else {\n    factory(global);\n  }\n})(typeof window !== 'undefined' ? window : this, function (window, noGlobal) {\n  var fileBrowser = {\n    name: 'fileBrowser',\n    _xmlHttp: null,\n    _loading: null,\n\n    /**\n     * @description Constructor\n     * @param {Object} core Core object \n     */\n    add: function add(core) {\n      var context = core.context;\n      context.fileBrowser = {\n        _closeSignal: false,\n        area: null,\n        header: null,\n        tagArea: null,\n        body: null,\n        list: null,\n        tagElements: null,\n        items: [],\n        selectedTags: [],\n        selectorHandler: null,\n        contextPlugin: '',\n        columnSize: 4\n      };\n      /** fileBrowser */\n\n      var browser_div = core.util.createElement('DIV');\n      browser_div.className = 'se-file-browser sun-editor-common';\n      var back = core.util.createElement('DIV');\n      back.className = 'se-file-browser-back';\n      var content = core.util.createElement('DIV');\n      content.className = 'se-file-browser-inner';\n      content.innerHTML = this.set_browser(core);\n      browser_div.appendChild(back);\n      browser_div.appendChild(content);\n      this._loading = browser_div.querySelector('.se-loading-box');\n      context.fileBrowser.area = browser_div;\n      context.fileBrowser.header = content.querySelector('.se-file-browser-header');\n      context.fileBrowser.titleArea = content.querySelector('.se-file-browser-title');\n      context.fileBrowser.tagArea = content.querySelector('.se-file-browser-tags');\n      context.fileBrowser.body = content.querySelector('.se-file-browser-body');\n      context.fileBrowser.list = content.querySelector('.se-file-browser-list');\n      /** add event listeners */\n\n      context.fileBrowser.tagArea.addEventListener('click', this.onClickTag.bind(core));\n      context.fileBrowser.list.addEventListener('click', this.onClickFile.bind(core));\n      content.addEventListener('mousedown', this._onMouseDown_browser.bind(core));\n      content.addEventListener('click', this._onClick_browser.bind(core));\n      /** append html */\n\n      context.element.relative.appendChild(browser_div);\n      /** empty memory */\n\n      browser_div = null, back = null, content = null;\n    },\n    set_browser: function set_browser(core) {\n      var lang = core.lang;\n      return '<div class=\"se-file-browser-content\">' + '<div class=\"se-file-browser-header\">' + '<button type=\"button\" data-command=\"close\" class=\"se-btn se-file-browser-close\" class=\"close\" title=\"' + lang.dialogBox.close + '\" aria-label=\"' + lang.dialogBox.close + '\">' + core.icons.cancel + '</button>' + '<span class=\"se-file-browser-title\"></span>' + '<div class=\"se-file-browser-tags\"></div>' + '</div>' + '<div class=\"se-file-browser-body\">' + '<div class=\"se-loading-box sun-editor-common\"><div class=\"se-loading-effect\"></div></div>' + '<div class=\"se-file-browser-list\"></div>' + '</div>' + '</div>';\n    },\n\n    /**\n     * @description Event to control the behavior of closing the browser\n     * @param {MouseEvent} e Event object\n     * @private\n     */\n    _onMouseDown_browser: function _onMouseDown_browser(e) {\n      if (/se-file-browser-inner/.test(e.target.className)) {\n        this.context.fileBrowser._closeSignal = true;\n      } else {\n        this.context.fileBrowser._closeSignal = false;\n      }\n    },\n\n    /**\n     * @description Event to close the window when the outside area of the browser or close button is click\n     * @param {MouseEvent} e Event object\n     * @private\n     */\n    _onClick_browser: function _onClick_browser(e) {\n      e.stopPropagation();\n\n      if (/close/.test(e.target.getAttribute('data-command')) || this.context.fileBrowser._closeSignal) {\n        this.plugins.fileBrowser.close.call(this);\n      }\n    },\n\n    /**\n     * @description Open a file browser plugin\n     * @param {String} pluginName Plugin name using the file browser\n     * @param {Function|null} selectorHandler When the function comes as an argument value, it substitutes \"context.selectorHandler\".\n     */\n    open: function open(pluginName, selectorHandler) {\n      if (this.plugins.fileBrowser._bindClose) {\n        this._d.removeEventListener('keydown', this.plugins.fileBrowser._bindClose);\n\n        this.plugins.fileBrowser._bindClose = null;\n      }\n\n      this.plugins.fileBrowser._bindClose = function (e) {\n        if (!/27/.test(e.keyCode)) return;\n        this.plugins.fileBrowser.close.call(this);\n      }.bind(this);\n\n      this._d.addEventListener('keydown', this.plugins.fileBrowser._bindClose);\n\n      var fileBrowserContext = this.context.fileBrowser;\n      fileBrowserContext.contextPlugin = pluginName;\n      fileBrowserContext.selectorHandler = selectorHandler;\n      var pluginContext = this.context[pluginName];\n      var listClassName = pluginContext.listClass;\n\n      if (!this.util.hasClass(fileBrowserContext.list, listClassName)) {\n        fileBrowserContext.list.className = 'se-file-browser-list ' + listClassName;\n      }\n\n      if (this.options.popupDisplay === 'full') {\n        fileBrowserContext.area.style.position = 'fixed';\n      } else {\n        fileBrowserContext.area.style.position = 'absolute';\n      }\n\n      fileBrowserContext.titleArea.textContent = pluginContext.title;\n      fileBrowserContext.area.style.display = 'block';\n\n      this.plugins.fileBrowser._drawFileList.call(this, this.context[pluginName].url, this.context[pluginName].header);\n    },\n    _bindClose: null,\n\n    /**\n     * @description Close a fileBrowser plugin\n     * The plugin's \"init\" method is called.\n     */\n    close: function close() {\n      var fileBrowserPlugin = this.plugins.fileBrowser;\n\n      if (fileBrowserPlugin._xmlHttp) {\n        fileBrowserPlugin._xmlHttp.abort();\n      }\n\n      if (fileBrowserPlugin._bindClose) {\n        this._d.removeEventListener('keydown', fileBrowserPlugin._bindClose);\n\n        fileBrowserPlugin._bindClose = null;\n      }\n\n      var fileBrowserContext = this.context.fileBrowser;\n      fileBrowserContext.area.style.display = 'none';\n      fileBrowserContext.selectorHandler = null;\n      fileBrowserContext.selectedTags = [];\n      fileBrowserContext.items = [];\n      fileBrowserContext.list.innerHTML = fileBrowserContext.tagArea.innerHTML = fileBrowserContext.titleArea.textContent = '';\n      if (typeof this.plugins[fileBrowserContext.contextPlugin].init === 'function') this.plugins[fileBrowserContext.contextPlugin].init.call(this);\n      fileBrowserContext.contextPlugin = '';\n    },\n\n    /**\n     * @description Show file browser loading box\n     */\n    showBrowserLoading: function showBrowserLoading() {\n      this._loading.style.display = 'block';\n    },\n\n    /**\n     * @description Close file browser loading box\n     */\n    closeBrowserLoading: function closeBrowserLoading() {\n      this._loading.style.display = 'none';\n    },\n    _drawFileList: function _drawFileList(url, browserHeader) {\n      var fileBrowserPlugin = this.plugins.fileBrowser;\n      var xmlHttp = fileBrowserPlugin._xmlHttp = this.util.getXMLHttpRequest();\n      xmlHttp.onreadystatechange = fileBrowserPlugin._callBackGet.bind(this, xmlHttp);\n      xmlHttp.open('get', url, true);\n\n      if (browserHeader !== null && typeof browserHeader === 'object' && this._w.Object.keys(browserHeader).length > 0) {\n        for (var key in browserHeader) {\n          xmlHttp.setRequestHeader(key, browserHeader[key]);\n        }\n      }\n\n      xmlHttp.send(null);\n      this.plugins.fileBrowser.showBrowserLoading();\n    },\n    _callBackGet: function _callBackGet(xmlHttp) {\n      if (xmlHttp.readyState === 4) {\n        this.plugins.fileBrowser._xmlHttp = null;\n\n        if (xmlHttp.status === 200) {\n          try {\n            var res = JSON.parse(xmlHttp.responseText);\n\n            if (res.result.length > 0) {\n              this.plugins.fileBrowser._drawListItem.call(this, res.result, true);\n            } else if (res.nullMessage) {\n              this.context.fileBrowser.list.innerHTML = res.nullMessage;\n            }\n          } catch (e) {\n            throw Error('[SUNEDITOR.fileBrowser.drawList.fail] cause : \"' + e.message + '\"');\n          } finally {\n            this.plugins.fileBrowser.closeBrowserLoading();\n            this.context.fileBrowser.body.style.maxHeight = this._w.innerHeight - this.context.fileBrowser.header.offsetHeight - 50 + 'px';\n          }\n        } else {\n          // exception\n          this.plugins.fileBrowser.closeBrowserLoading();\n\n          if (xmlHttp.status !== 0) {\n            var _res = !xmlHttp.responseText ? xmlHttp : JSON.parse(xmlHttp.responseText);\n\n            var err = '[SUNEDITOR.fileBrowser.get.serverException] status: ' + xmlHttp.status + ', response: ' + (_res.errorMessage || xmlHttp.responseText);\n            throw Error(err);\n          }\n        }\n      }\n    },\n    _drawListItem: function _drawListItem(items, update) {\n      var fileBrowserContext = this.context.fileBrowser;\n      var pluginContext = this.context[fileBrowserContext.contextPlugin];\n      var _tags = [];\n      var len = items.length;\n      var columnSize = pluginContext.columnSize || fileBrowserContext.columnSize;\n      var splitSize = columnSize <= 1 ? 1 : Math.round(len / columnSize) || 1;\n      var drawItemHandler = pluginContext.itemTemplateHandler;\n      var tagsHTML = '';\n      var listHTML = '<div class=\"se-file-item-column\">';\n      var columns = 1;\n\n      for (var i = 0, item, tags; i < len; i++) {\n        item = items[i];\n        tags = !item.tag ? [] : typeof item.tag === 'string' ? item.tag.split(',') : item.tag;\n        tags = item.tag = tags.map(function (v) {\n          return v.trim();\n        });\n        listHTML += drawItemHandler(item);\n\n        if ((i + 1) % splitSize === 0 && columns < columnSize && i + 1 < len) {\n          columns++;\n          listHTML += '</div><div class=\"se-file-item-column\">';\n        }\n\n        if (update && tags.length > 0) {\n          for (var t = 0, tLen = tags.length, tag; t < tLen; t++) {\n            tag = tags[t];\n\n            if (tag && _tags.indexOf(tag) === -1) {\n              _tags.push(tag);\n\n              tagsHTML += '<a title=\"' + tag + '\" aria-label=\"' + tag + '\">' + tag + '</a>';\n            }\n          }\n        }\n      }\n\n      listHTML += '</div>';\n      fileBrowserContext.list.innerHTML = listHTML;\n\n      if (update) {\n        fileBrowserContext.items = items;\n        fileBrowserContext.tagArea.innerHTML = tagsHTML;\n        fileBrowserContext.tagElements = fileBrowserContext.tagArea.querySelectorAll('A');\n      }\n    },\n    onClickTag: function onClickTag(e) {\n      var target = e.target;\n      if (!this.util.isAnchor(target)) return;\n      var tagName = target.textContent;\n      var fileBrowserPlugin = this.plugins.fileBrowser;\n      var fileBrowserContext = this.context.fileBrowser;\n      var selectTag = fileBrowserContext.tagArea.querySelector('a[title=\"' + tagName + '\"]');\n      var selectedTags = fileBrowserContext.selectedTags;\n      var sTagIndex = selectedTags.indexOf(tagName);\n\n      if (sTagIndex > -1) {\n        selectedTags.splice(sTagIndex, 1);\n        this.util.removeClass(selectTag, 'on');\n      } else {\n        selectedTags.push(tagName);\n        this.util.addClass(selectTag, 'on');\n      }\n\n      fileBrowserPlugin._drawListItem.call(this, selectedTags.length === 0 ? fileBrowserContext.items : fileBrowserContext.items.filter(function (item) {\n        return item.tag.some(function (tag) {\n          return selectedTags.indexOf(tag) > -1;\n        });\n      }), false);\n    },\n    onClickFile: function onClickFile(e) {\n      e.preventDefault();\n      e.stopPropagation();\n      var fileBrowserContext = this.context.fileBrowser;\n      var listEl = fileBrowserContext.list;\n      var target = e.target;\n      var command = null;\n      if (target === listEl) return;\n\n      while (listEl !== target.parentNode) {\n        command = target.getAttribute('data-command');\n        if (command) break;\n        target = target.parentNode;\n      }\n\n      if (!command) return;\n      var handler = fileBrowserContext.selectorHandler || this.context[fileBrowserContext.contextPlugin].selectorHandler;\n      this.plugins.fileBrowser.close.call(this);\n      handler(target);\n    }\n  };\n\n  if (typeof noGlobal === typeof undefined) {\n    if (!window.SUNEDITOR_MODULES) {\n      Object.defineProperty(window, 'SUNEDITOR_MODULES', {\n        enumerable: true,\n        writable: false,\n        configurable: false,\n        value: {}\n      });\n    }\n\n    Object.defineProperty(window.SUNEDITOR_MODULES, 'fileBrowser', {\n      enumerable: true,\n      writable: false,\n      configurable: false,\n      value: fileBrowser\n    });\n  }\n\n  return fileBrowser;\n});","map":{"version":3,"names":["global","factory","module","exports","document","w","Error","window","noGlobal","fileBrowser","name","_xmlHttp","_loading","add","core","context","_closeSignal","area","header","tagArea","body","list","tagElements","items","selectedTags","selectorHandler","contextPlugin","columnSize","browser_div","util","createElement","className","back","content","innerHTML","set_browser","appendChild","querySelector","titleArea","addEventListener","onClickTag","bind","onClickFile","_onMouseDown_browser","_onClick_browser","element","relative","lang","dialogBox","close","icons","cancel","e","test","target","stopPropagation","getAttribute","plugins","call","open","pluginName","_bindClose","_d","removeEventListener","keyCode","fileBrowserContext","pluginContext","listClassName","listClass","hasClass","options","popupDisplay","style","position","textContent","title","display","_drawFileList","url","fileBrowserPlugin","abort","init","showBrowserLoading","closeBrowserLoading","browserHeader","xmlHttp","getXMLHttpRequest","onreadystatechange","_callBackGet","_w","Object","keys","length","key","setRequestHeader","send","readyState","status","res","JSON","parse","responseText","result","_drawListItem","nullMessage","message","maxHeight","innerHeight","offsetHeight","err","errorMessage","update","_tags","len","splitSize","Math","round","drawItemHandler","itemTemplateHandler","tagsHTML","listHTML","columns","i","item","tags","tag","split","map","v","trim","t","tLen","indexOf","push","querySelectorAll","isAnchor","tagName","selectTag","sTagIndex","splice","removeClass","addClass","filter","some","preventDefault","listEl","command","parentNode","handler","undefined","SUNEDITOR_MODULES","defineProperty","enumerable","writable","configurable","value"],"sources":["/Users/jirayuyungmeesuk/Desktop/ v2/client/node_modules/suneditor/src/plugins/modules/fileBrowser.js"],"sourcesContent":["/*\n * wysiwyg web editor\n *\n * suneditor.js\n * Copyright 2017 JiHong Lee.\n * MIT license.\n */\n'use strict';\n\n(function (global, factory) {\n    if (typeof module === 'object' && typeof module.exports === 'object') {\n        module.exports = global.document ?\n            factory(global, true) :\n            function (w) {\n                if (!w.document) {\n                    throw new Error('SUNEDITOR_MODULES a window with a document');\n                }\n                return factory(w);\n            };\n    } else {\n        factory(global);\n    }\n}(typeof window !== 'undefined' ? window : this, function (window, noGlobal) {\n    const fileBrowser = {\n        name: 'fileBrowser',\n        _xmlHttp: null,\n        _loading: null,\n\n        /**\n         * @description Constructor\n         * @param {Object} core Core object \n         */\n        add: function (core) {\n            const context = core.context;\n            context.fileBrowser = {\n                _closeSignal: false,\n                area: null,\n                header: null,\n                tagArea: null,\n                body: null,\n                list: null,\n                tagElements: null,\n                items: [],\n                selectedTags: [],\n                selectorHandler: null,\n                contextPlugin: '',\n                columnSize: 4\n            };\n\n            /** fileBrowser */\n            let browser_div = core.util.createElement('DIV');\n            browser_div.className = 'se-file-browser sun-editor-common';\n\n            let back = core.util.createElement('DIV');\n            back.className = 'se-file-browser-back';\n\n            let content = core.util.createElement('DIV');\n            content.className = 'se-file-browser-inner';\n            content.innerHTML = this.set_browser(core);\n\n            browser_div.appendChild(back);\n            browser_div.appendChild(content);\n            this._loading = browser_div.querySelector('.se-loading-box');\n\n            context.fileBrowser.area = browser_div;\n            context.fileBrowser.header = content.querySelector('.se-file-browser-header');\n            context.fileBrowser.titleArea = content.querySelector('.se-file-browser-title');\n            context.fileBrowser.tagArea = content.querySelector('.se-file-browser-tags');\n            context.fileBrowser.body = content.querySelector('.se-file-browser-body');\n            context.fileBrowser.list = content.querySelector('.se-file-browser-list');\n\n            /** add event listeners */\n            context.fileBrowser.tagArea.addEventListener('click', this.onClickTag.bind(core));\n            context.fileBrowser.list.addEventListener('click', this.onClickFile.bind(core));\n            content.addEventListener('mousedown', this._onMouseDown_browser.bind(core));\n            content.addEventListener('click', this._onClick_browser.bind(core));\n            \n            /** append html */\n            context.element.relative.appendChild(browser_div);\n            \n            /** empty memory */\n            browser_div = null, back = null, content = null;\n        },\n\n        set_browser: function (core) {\n            const lang = core.lang;\n\n            return '<div class=\"se-file-browser-content\">' +\n                    '<div class=\"se-file-browser-header\">' +\n                        '<button type=\"button\" data-command=\"close\" class=\"se-btn se-file-browser-close\" class=\"close\" title=\"' + lang.dialogBox.close + '\" aria-label=\"' + lang.dialogBox.close + '\">' +\n                        core.icons.cancel +\n                        '</button>' +\n                        '<span class=\"se-file-browser-title\"></span>' +\n                        '<div class=\"se-file-browser-tags\"></div>' +\n                    '</div>' +\n                    '<div class=\"se-file-browser-body\">' +\n                        '<div class=\"se-loading-box sun-editor-common\"><div class=\"se-loading-effect\"></div></div>' +\n                        '<div class=\"se-file-browser-list\"></div>' +\n                    '</div>' +\n                '</div>';\n        },\n\n        /**\n         * @description Event to control the behavior of closing the browser\n         * @param {MouseEvent} e Event object\n         * @private\n         */\n        _onMouseDown_browser: function (e) {\n            if (/se-file-browser-inner/.test(e.target.className)) {\n                this.context.fileBrowser._closeSignal = true;\n            } else {\n                this.context.fileBrowser._closeSignal = false;\n            }\n        },\n\n        /**\n         * @description Event to close the window when the outside area of the browser or close button is click\n         * @param {MouseEvent} e Event object\n         * @private\n         */\n        _onClick_browser: function (e) {\n            e.stopPropagation();\n\n            if (/close/.test(e.target.getAttribute('data-command')) || this.context.fileBrowser._closeSignal) {\n                this.plugins.fileBrowser.close.call(this);\n            }\n        },\n\n        /**\n         * @description Open a file browser plugin\n         * @param {String} pluginName Plugin name using the file browser\n         * @param {Function|null} selectorHandler When the function comes as an argument value, it substitutes \"context.selectorHandler\".\n         */\n        open: function (pluginName, selectorHandler)  {\n            if (this.plugins.fileBrowser._bindClose) {\n                this._d.removeEventListener('keydown', this.plugins.fileBrowser._bindClose);\n                this.plugins.fileBrowser._bindClose = null;\n            }\n\n            this.plugins.fileBrowser._bindClose = function (e) {\n                if (!/27/.test(e.keyCode)) return;\n                this.plugins.fileBrowser.close.call(this);\n            }.bind(this);\n            this._d.addEventListener('keydown', this.plugins.fileBrowser._bindClose);\n\n            const fileBrowserContext = this.context.fileBrowser;\n            fileBrowserContext.contextPlugin = pluginName;\n            fileBrowserContext.selectorHandler = selectorHandler;\n            \n            const pluginContext = this.context[pluginName];\n            const listClassName = pluginContext.listClass;\n            if (!this.util.hasClass(fileBrowserContext.list, listClassName)) {\n                fileBrowserContext.list.className = 'se-file-browser-list ' + listClassName;\n            }\n\n            if (this.options.popupDisplay === 'full') {\n                fileBrowserContext.area.style.position = 'fixed';\n            } else {\n                fileBrowserContext.area.style.position = 'absolute';\n            }\n            \n            fileBrowserContext.titleArea.textContent = pluginContext.title;\n            fileBrowserContext.area.style.display = 'block';\n\n            this.plugins.fileBrowser._drawFileList.call(this, this.context[pluginName].url, this.context[pluginName].header);\n        },\n\n        _bindClose: null,\n        \n        /**\n         * @description Close a fileBrowser plugin\n         * The plugin's \"init\" method is called.\n         */\n        close: function () {\n            const fileBrowserPlugin = this.plugins.fileBrowser;\n\n            if (fileBrowserPlugin._xmlHttp) {\n                fileBrowserPlugin._xmlHttp.abort();\n            }\n\n            if (fileBrowserPlugin._bindClose) {\n                this._d.removeEventListener('keydown', fileBrowserPlugin._bindClose);\n                fileBrowserPlugin._bindClose = null;\n            }\n\n            const fileBrowserContext = this.context.fileBrowser;\n            fileBrowserContext.area.style.display = 'none';\n            fileBrowserContext.selectorHandler = null;\n            fileBrowserContext.selectedTags = [];\n            fileBrowserContext.items = [];\n            fileBrowserContext.list.innerHTML = fileBrowserContext.tagArea.innerHTML = fileBrowserContext.titleArea.textContent = '';\n\n            if (typeof this.plugins[fileBrowserContext.contextPlugin].init === 'function') this.plugins[fileBrowserContext.contextPlugin].init.call(this);\n            fileBrowserContext.contextPlugin = '';\n        },\n\n        /**\n         * @description Show file browser loading box\n         */\n        showBrowserLoading: function () {\n            this._loading.style.display = 'block';\n        },\n\n        /**\n         * @description Close file browser loading box\n         */\n        closeBrowserLoading: function () {\n            this._loading.style.display = 'none';\n        },\n\n        _drawFileList: function (url, browserHeader) {\n            const fileBrowserPlugin = this.plugins.fileBrowser;\n\n            const xmlHttp = fileBrowserPlugin._xmlHttp = this.util.getXMLHttpRequest();\n            xmlHttp.onreadystatechange = fileBrowserPlugin._callBackGet.bind(this, xmlHttp);\n            xmlHttp.open('get', url, true);\n            if(browserHeader !== null && typeof browserHeader === 'object' && this._w.Object.keys(browserHeader).length > 0){\n                for(let key in browserHeader){\n                    xmlHttp.setRequestHeader(key, browserHeader[key]);\n                }\n            }\n            xmlHttp.send(null);\n\n            this.plugins.fileBrowser.showBrowserLoading();\n        },\n\n        _callBackGet: function (xmlHttp) {\n            if (xmlHttp.readyState === 4) {\n                this.plugins.fileBrowser._xmlHttp = null;\n                if (xmlHttp.status === 200) {\n                    try {\n                        const res = JSON.parse(xmlHttp.responseText);\n                        if (res.result.length > 0) {\n                            this.plugins.fileBrowser._drawListItem.call(this, res.result, true);\n                        } else if (res.nullMessage) {\n                            this.context.fileBrowser.list.innerHTML = res.nullMessage;\n                        }\n                    } catch (e) {\n                        throw Error('[SUNEDITOR.fileBrowser.drawList.fail] cause : \"' + e.message + '\"');\n                    } finally {\n                        this.plugins.fileBrowser.closeBrowserLoading();\n                        this.context.fileBrowser.body.style.maxHeight = (this._w.innerHeight - this.context.fileBrowser.header.offsetHeight - 50) + 'px';\n                    }\n                } else { // exception\n                    this.plugins.fileBrowser.closeBrowserLoading();\n                    if (xmlHttp.status !== 0) {\n                        const res = !xmlHttp.responseText ? xmlHttp : JSON.parse(xmlHttp.responseText);\n                        const err = '[SUNEDITOR.fileBrowser.get.serverException] status: ' + xmlHttp.status + ', response: ' + (res.errorMessage || xmlHttp.responseText);\n                        throw Error(err);\n                    }\n                }\n            }\n        },\n\n        _drawListItem: function (items, update) {\n            const fileBrowserContext = this.context.fileBrowser;\n            const pluginContext = this.context[fileBrowserContext.contextPlugin];\n\n            const _tags = [];\n            const len = items.length;\n            const columnSize = pluginContext.columnSize || fileBrowserContext.columnSize;\n            const splitSize = columnSize <= 1 ? 1 : (Math.round(len/columnSize) || 1);\n            const drawItemHandler = pluginContext.itemTemplateHandler;\n            \n            let tagsHTML = '';\n            let listHTML = '<div class=\"se-file-item-column\">';\n            let columns = 1;\n            for (let i = 0, item, tags; i < len; i++) {\n                item = items[i];\n                tags = !item.tag ? [] : typeof item.tag === 'string' ? item.tag.split(',') : item.tag;\n                tags = item.tag = tags.map(function (v) { return v.trim(); });\n                listHTML += drawItemHandler(item);\n\n                if ((i + 1) % splitSize === 0 && columns < columnSize && (i + 1) < len) {\n                    columns++;\n                    listHTML += '</div><div class=\"se-file-item-column\">';\n                }\n                \n                if (update && tags.length > 0) {\n                    for (let t = 0, tLen = tags.length, tag; t < tLen; t++) {\n                        tag = tags[t];\n                        if (tag && _tags.indexOf(tag) === -1) {\n                            _tags.push(tag);\n                            tagsHTML += '<a title=\"' + tag + '\" aria-label=\"' + tag + '\">' + tag + '</a>';\n                        }\n                    }\n                }\n            }\n            listHTML += '</div>';\n\n            fileBrowserContext.list.innerHTML = listHTML;\n\n            if (update) {\n                fileBrowserContext.items = items;\n                fileBrowserContext.tagArea.innerHTML = tagsHTML;\n                fileBrowserContext.tagElements = fileBrowserContext.tagArea.querySelectorAll('A');\n            }\n        },\n\n        onClickTag: function (e) {\n            const target = e.target;\n            if (!this.util.isAnchor(target)) return;\n\n            const tagName = target.textContent;\n            const fileBrowserPlugin = this.plugins.fileBrowser;\n            const fileBrowserContext = this.context.fileBrowser;\n\n            const selectTag = fileBrowserContext.tagArea.querySelector('a[title=\"' + tagName + '\"]');\n            const selectedTags = fileBrowserContext.selectedTags;\n            const sTagIndex = selectedTags.indexOf(tagName);\n\n            if (sTagIndex > -1){\n                selectedTags.splice(sTagIndex, 1);\n                this.util.removeClass(selectTag, 'on');\n            } else {\n                selectedTags.push(tagName);\n                this.util.addClass(selectTag, 'on');\n            }\n\n            fileBrowserPlugin._drawListItem.call(this,\n                selectedTags.length === 0 ?\n                fileBrowserContext.items :\n                fileBrowserContext.items.filter(function (item) {\n                    return item.tag.some(function (tag) {\n                        return selectedTags.indexOf(tag) > -1;\n                    });\n                }), false);\n        },\n\n        onClickFile: function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            const fileBrowserContext = this.context.fileBrowser;\n            const listEl = fileBrowserContext.list;\n            let target = e.target;\n            let command = null;\n\n            if (target === listEl) return;\n\n            while (listEl !== target.parentNode) {\n                command = target.getAttribute('data-command');\n                if (command) break;\n                target = target.parentNode;\n            }\n\n            if (!command) return;\n\n            const handler = (fileBrowserContext.selectorHandler || this.context[fileBrowserContext.contextPlugin].selectorHandler);\n            this.plugins.fileBrowser.close.call(this);\n            handler(target);\n        }\n    };\n\n    if (typeof noGlobal === typeof undefined) {\n        if (!window.SUNEDITOR_MODULES) {\n            Object.defineProperty(window, 'SUNEDITOR_MODULES', {\n                enumerable: true,\n                writable: false,\n                configurable: false,\n                value: {}\n            });\n        }\n\n        Object.defineProperty(window.SUNEDITOR_MODULES, 'fileBrowser', {\n            enumerable: true,\n            writable: false,\n            configurable: false,\n            value: fileBrowser\n        });\n    }\n\n    return fileBrowser;\n}));"],"mappings":"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"},"metadata":{},"sourceType":"script"}