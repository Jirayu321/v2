{"ast":null,"code":"import _defineProperty from \"/Users/jirayuyungmeesuk/Desktop/code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _objectSpread from \"/Users/jirayuyungmeesuk/Desktop/code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/jirayuyungmeesuk/Desktop/code/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport { useState, useCallback, useMemo, useContext } from 'react';\nimport { MapContext } from './map';\nexport var MountedMapsContext = React.createContext(null);\nexport var MapProvider = function MapProvider(props) {\n  var _useState = useState({}),\n      _useState2 = _slicedToArray(_useState, 2),\n      maps = _useState2[0],\n      setMaps = _useState2[1];\n\n  var onMapMount = useCallback(function (map) {\n    var id = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'default';\n    setMaps(function (currMaps) {\n      if (id === 'current') {\n        throw new Error(\"'current' cannot be used as map id\");\n      }\n\n      if (currMaps[id]) {\n        throw new Error(\"Multiple maps with the same id: \".concat(id));\n      }\n\n      return _objectSpread(_objectSpread({}, currMaps), {}, _defineProperty({}, id, map));\n    });\n  }, []);\n  var onMapUnmount = useCallback(function () {\n    var id = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'default';\n    setMaps(function (currMaps) {\n      if (currMaps[id]) {\n        var nextMaps = _objectSpread({}, currMaps);\n\n        delete nextMaps[id];\n        return nextMaps;\n      }\n\n      return currMaps;\n    });\n  }, []);\n  return React.createElement(MountedMapsContext.Provider, {\n    value: {\n      maps: maps,\n      onMapMount: onMapMount,\n      onMapUnmount: onMapUnmount\n    }\n  }, props.children);\n};\nexport function useMap() {\n  var _a;\n\n  var maps = (_a = useContext(MountedMapsContext)) === null || _a === void 0 ? void 0 : _a.maps;\n  var currentMap = useContext(MapContext);\n  var mapsWithCurrent = useMemo(function () {\n    return _objectSpread(_objectSpread({}, maps), {}, {\n      current: currentMap === null || currentMap === void 0 ? void 0 : currentMap.map\n    });\n  }, [maps, currentMap]);\n  return mapsWithCurrent;\n}","map":{"version":3,"sources":["../../../src/components/use-map.tsx"],"names":[],"mappings":";;;AAAA,OAAO,KAAK,KAAZ,MAAuB,OAAvB;AACA,SAAQ,QAAR,EAAkB,WAAlB,EAA+B,OAA/B,EAAwC,UAAxC,QAAyD,OAAzD;AAGA,SAAQ,UAAR,QAAyB,OAAzB;AAQA,OAAO,IAAM,kBAAkB,GAAG,KAAK,CAAC,aAAN,CAA6C,IAA7C,CAA3B;AAEP,OAAO,IAAM,WAAW,GAA2C,SAAtD,WAAsD,CAAA,KAAK,EAAG;EACzE,gBAAwB,QAAQ,CAAyB,EAAzB,CAAhC;EAAA;EAAA,IAAO,IAAP;EAAA,IAAa,OAAb;;EAEA,IAAM,UAAU,GAAG,WAAW,CAAC,UAAC,GAAD,EAAwC;IAAA,IAA1B,EAA0B,uEAAb,SAAa;IACrE,OAAO,CAAC,UAAA,QAAQ,EAAG;MACjB,IAAI,EAAE,KAAK,SAAX,EAAsB;QACpB,MAAM,IAAI,KAAJ,CAAU,oCAAV,CAAN;MACD;;MACD,IAAI,QAAQ,CAAC,EAAD,CAAZ,EAAkB;QAChB,MAAM,IAAI,KAAJ,2CAA6C,EAA7C,EAAN;MACD;;MACD,uCAAW,QAAX,2BAAsB,EAAtB,EAA2B,GAA3B;IACD,CARM,CAAP;EASD,CAV6B,EAU3B,EAV2B,CAA9B;EAYA,IAAM,YAAY,GAAG,WAAW,CAAC,YAA2B;IAAA,IAA1B,EAA0B,uEAAb,SAAa;IAC1D,OAAO,CAAC,UAAA,QAAQ,EAAG;MACjB,IAAI,QAAQ,CAAC,EAAD,CAAZ,EAAkB;QAChB,IAAM,QAAQ,qBAAO,QAAP,CAAd;;QACA,OAAO,QAAQ,CAAC,EAAD,CAAf;QACA,OAAO,QAAP;MACD;;MACD,OAAO,QAAP;IACD,CAPM,CAAP;EAQD,CAT+B,EAS7B,EAT6B,CAAhC;EAWA,OACE,KAAA,CAAA,aAAA,CAAC,kBAAkB,CAAC,QAApB,EAA4B;IAC1B,KAAK,EAAE;MACL,IAAI,EAAJ,IADK;MAEL,UAAU,EAAV,UAFK;MAGL,YAAY,EAAZ;IAHK;EADmB,CAA5B,EAOG,KAAK,CAAC,QAPT,CADF;AAWD,CArCM;AAuCP,OAAM,SAAU,MAAV,GAAgB;;;EACpB,IAAM,IAAI,GAAG,CAAA,EAAA,GAAA,UAAU,CAAC,kBAAD,CAAV,MAA8B,IAA9B,IAA8B,EAAA,KAAA,KAAA,CAA9B,GAA8B,KAAA,CAA9B,GAA8B,EAAA,CAAE,IAA7C;EACA,IAAM,UAAU,GAAG,UAAU,CAAC,UAAD,CAA7B;EAEA,IAAM,eAAe,GAAG,OAAO,CAAC,YAAK;IACnC,uCAAW,IAAX;MAAiB,OAAO,EAAE,UAAU,KAAA,IAAV,IAAA,UAAU,KAAA,KAAA,CAAV,GAAU,KAAA,CAAV,GAAA,UAAU,CAAE;IAAtC;EACD,CAF8B,EAE5B,CAAC,IAAD,EAAO,UAAP,CAF4B,CAA/B;EAIA,OAAO,eAAP;AACD","sourceRoot":"","sourcesContent":["import * as React from 'react';\nimport { useState, useCallback, useMemo, useContext } from 'react';\nimport { MapContext } from './map';\nexport const MountedMapsContext = React.createContext(null);\nexport const MapProvider = props => {\n    const [maps, setMaps] = useState({});\n    const onMapMount = useCallback((map, id = 'default') => {\n        setMaps(currMaps => {\n            if (id === 'current') {\n                throw new Error(\"'current' cannot be used as map id\");\n            }\n            if (currMaps[id]) {\n                throw new Error(`Multiple maps with the same id: ${id}`);\n            }\n            return { ...currMaps, [id]: map };\n        });\n    }, []);\n    const onMapUnmount = useCallback((id = 'default') => {\n        setMaps(currMaps => {\n            if (currMaps[id]) {\n                const nextMaps = { ...currMaps };\n                delete nextMaps[id];\n                return nextMaps;\n            }\n            return currMaps;\n        });\n    }, []);\n    return (React.createElement(MountedMapsContext.Provider, { value: {\n            maps,\n            onMapMount,\n            onMapUnmount\n        } }, props.children));\n};\nexport function useMap() {\n    var _a;\n    const maps = (_a = useContext(MountedMapsContext)) === null || _a === void 0 ? void 0 : _a.maps;\n    const currentMap = useContext(MapContext);\n    const mapsWithCurrent = useMemo(() => {\n        return { ...maps, current: currentMap === null || currentMap === void 0 ? void 0 : currentMap.map };\n    }, [maps, currentMap]);\n    return mapsWithCurrent;\n}\n//# sourceMappingURL=use-map.js.map"]},"metadata":{},"sourceType":"module"}