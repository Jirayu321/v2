{"ast":null,"code":"/*\n * wysiwyg web editor\n *\n * suneditor.js\n * Copyright 2017 JiHong Lee.\n * MIT license.\n */\n'use strict';\n\nexport default {\n  name: 'list',\n  display: 'submenu',\n  add: function add(core, targetElement) {\n    var context = core.context;\n    context.list = {\n      targetButton: targetElement,\n      _list: null,\n      currentList: '',\n      icons: {\n        bullets: core.icons.list_bullets,\n        number: core.icons.list_number\n      }\n    };\n    /** set submenu */\n\n    var listDiv = this.setSubmenu(core);\n    var listUl = listDiv.querySelector('ul');\n    /** add event listeners */\n\n    listUl.addEventListener('click', this.pickup.bind(core));\n    context.list._list = listUl.querySelectorAll('li button');\n    /** append target button menu */\n\n    core.initMenuTarget(this.name, targetElement, listDiv);\n    /** empty memory */\n\n    listDiv = null, listUl = null;\n  },\n  setSubmenu: function setSubmenu(core) {\n    var lang = core.lang;\n    var listDiv = core.util.createElement('DIV');\n    listDiv.className = 'se-submenu se-list-layer';\n    listDiv.innerHTML = '' + '<div class=\"se-list-inner\">' + '<ul class=\"se-list-basic\">' + '<li><button type=\"button\" class=\"se-btn-list se-tooltip\" data-command=\"OL\" title=\"' + lang.toolbar.orderList + '\" aria-label=\"' + lang.toolbar.orderList + '\">' + core.icons.list_number + '</button></li>' + '<li><button type=\"button\" class=\"se-btn-list se-tooltip\" data-command=\"UL\" title=\"' + lang.toolbar.unorderList + '\" aria-label=\"' + lang.toolbar.unorderList + '\">' + core.icons.list_bullets + '</button></li>' + '</ul>' + '</div>';\n    return listDiv;\n  },\n\n  /**\n  * @Override core\n  */\n  active: function active(element) {\n    var button = this.context.list.targetButton;\n    var icon = button.firstElementChild;\n    var util = this.util;\n\n    if (util.isList(element)) {\n      var nodeName = element.nodeName;\n      button.setAttribute('data-focus', nodeName);\n      util.addClass(button, 'active');\n\n      if (/UL/i.test(nodeName)) {\n        util.changeElement(icon, this.context.list.icons.bullets);\n      } else {\n        util.changeElement(icon, this.context.list.icons.number);\n      }\n\n      return true;\n    } else {\n      button.removeAttribute('data-focus');\n      util.changeElement(icon, this.context.list.icons.number);\n      util.removeClass(button, 'active');\n    }\n\n    return false;\n  },\n\n  /**\n  * @Override submenu\n  */\n  on: function on() {\n    var listContext = this.context.list;\n    var list = listContext._list;\n    var currentList = listContext.targetButton.getAttribute('data-focus') || '';\n\n    if (currentList !== listContext.currentList) {\n      for (var i = 0, len = list.length; i < len; i++) {\n        if (currentList === list[i].getAttribute('data-command')) {\n          this.util.addClass(list[i], 'active');\n        } else {\n          this.util.removeClass(list[i], 'active');\n        }\n      }\n\n      listContext.currentList = currentList;\n    }\n  },\n  editList: function editList(command, selectedCells, detach) {\n    var range = this.getRange();\n    var selectedFormats = !selectedCells ? this.getSelectedElementsAndComponents(false) : selectedCells;\n\n    if (selectedFormats.length === 0) {\n      if (selectedCells) return;\n      range = this.getRange_addLine(range, null);\n      selectedFormats = this.getSelectedElementsAndComponents(false);\n      if (selectedFormats.length === 0) return;\n    }\n\n    var util = this.util;\n    util.sortByDepth(selectedFormats, true); // merge\n\n    var firstSel = selectedFormats[0];\n    var lastSel = selectedFormats[selectedFormats.length - 1];\n    var topEl = (util.isListCell(firstSel) || util.isComponent(firstSel)) && !firstSel.previousElementSibling ? firstSel.parentNode.previousElementSibling : firstSel.previousElementSibling;\n    var bottomEl = (util.isListCell(lastSel) || util.isComponent(lastSel)) && !lastSel.nextElementSibling ? lastSel.parentNode.nextElementSibling : lastSel.nextElementSibling;\n    var originRange = {\n      sc: range.startContainer,\n      so: range.startContainer === range.endContainer && util.onlyZeroWidthSpace(range.startContainer) && range.startOffset === 0 && range.endOffset === 1 ? range.endOffset : range.startOffset,\n      ec: range.endContainer,\n      eo: range.endOffset\n    };\n    var isRemove = true;\n\n    var _loop = function _loop(i, len) {\n      if (!util.isList(util.getRangeFormatElement(selectedFormats[i], function (current) {\n        return this.getRangeFormatElement(current) && current !== selectedFormats[i];\n      }.bind(util)))) {\n        isRemove = false;\n        return \"break\";\n      }\n    };\n\n    for (var i = 0, len = selectedFormats.length; i < len; i++) {\n      var _ret = _loop(i, len);\n\n      if (_ret === \"break\") break;\n    }\n\n    if (isRemove && (!topEl || firstSel.tagName !== topEl.tagName || command !== topEl.tagName.toUpperCase()) && (!bottomEl || lastSel.tagName !== bottomEl.tagName || command !== bottomEl.tagName.toUpperCase())) {\n      if (detach) {\n        for (var _i = 0, _len = selectedFormats.length; _i < _len; _i++) {\n          for (var j = _i - 1; j >= 0; j--) {\n            if (selectedFormats[j].contains(selectedFormats[_i])) {\n              selectedFormats.splice(_i, 1);\n              _i--;\n              _len--;\n              break;\n            }\n          }\n        }\n      }\n\n      var currentFormat = util.getRangeFormatElement(firstSel);\n      var cancel = currentFormat && currentFormat.tagName === command;\n      var rangeArr, tempList;\n\n      var passComponent = function (current) {\n        return !this.isComponent(current);\n      }.bind(util);\n\n      if (!cancel) tempList = util.createElement(command);\n\n      for (var _i2 = 0, _len2 = selectedFormats.length, r, o; _i2 < _len2; _i2++) {\n        o = util.getRangeFormatElement(selectedFormats[_i2], passComponent);\n        if (!o || !util.isList(o)) continue;\n\n        if (!r) {\n          r = o;\n          rangeArr = {\n            r: r,\n            f: [util.getParentElement(selectedFormats[_i2], 'LI')]\n          };\n        } else {\n          if (r !== o) {\n            if (detach && util.isListCell(o.parentNode)) {\n              this.plugins.list._detachNested.call(this, rangeArr.f);\n            } else {\n              this.detachRangeFormatElement(rangeArr.f[0].parentNode, rangeArr.f, tempList, false, true);\n            }\n\n            o = selectedFormats[_i2].parentNode;\n            if (!cancel) tempList = util.createElement(command);\n            r = o;\n            rangeArr = {\n              r: r,\n              f: [util.getParentElement(selectedFormats[_i2], 'LI')]\n            };\n          } else {\n            rangeArr.f.push(util.getParentElement(selectedFormats[_i2], 'LI'));\n          }\n        }\n\n        if (_i2 === _len2 - 1) {\n          if (detach && util.isListCell(o.parentNode)) {\n            this.plugins.list._detachNested.call(this, rangeArr.f);\n          } else {\n            this.detachRangeFormatElement(rangeArr.f[0].parentNode, rangeArr.f, tempList, false, true);\n          }\n        }\n      }\n    } else {\n      var topElParent = topEl ? topEl.parentNode : topEl;\n      var bottomElParent = bottomEl ? bottomEl.parentNode : bottomEl;\n      topEl = topElParent && !util.isWysiwygDiv(topElParent) && topElParent.nodeName === command ? topElParent : topEl;\n      bottomEl = bottomElParent && !util.isWysiwygDiv(bottomElParent) && bottomElParent.nodeName === command ? bottomElParent : bottomEl;\n      var mergeTop = topEl && topEl.tagName === command;\n      var mergeBottom = bottomEl && bottomEl.tagName === command;\n      var list = mergeTop ? topEl : util.createElement(command);\n      var firstList = null;\n      var lastList = null;\n      var topNumber = null;\n      var bottomNumber = null;\n\n      var _passComponent = function (current) {\n        return !this.isComponent(current) && !this.isList(current);\n      }.bind(util);\n\n      for (var _i3 = 0, _len3 = selectedFormats.length, newCell, fTag, isCell, next, originParent, nextParent, parentTag, siblingTag, rangeTag; _i3 < _len3; _i3++) {\n        fTag = selectedFormats[_i3];\n\n        if (fTag.childNodes.length === 0 && !util._isIgnoreNodeChange(fTag)) {\n          util.removeItem(fTag);\n          continue;\n        }\n\n        next = selectedFormats[_i3 + 1];\n        originParent = fTag.parentNode;\n        nextParent = next ? next.parentNode : null;\n        isCell = util.isListCell(fTag);\n        rangeTag = util.isRangeFormatElement(originParent) ? originParent : null;\n        parentTag = isCell && !util.isWysiwygDiv(originParent) ? originParent.parentNode : originParent;\n        siblingTag = isCell && !util.isWysiwygDiv(originParent) ? !next || util.isListCell(parentTag) ? originParent : originParent.nextSibling : fTag.nextSibling;\n        newCell = util.createElement('LI');\n        util.copyFormatAttributes(newCell, fTag);\n\n        if (_i3 === 0 && originRange.sc === fTag) {\n          originRange.sc = newCell;\n        }\n\n        if (_i3 === _len3 - 1 && originRange.ec === fTag) {\n          originRange.ec = newCell;\n        }\n\n        if (util.isComponent(fTag)) {\n          var isHR = /^HR$/i.test(fTag.nodeName);\n          if (!isHR) newCell.innerHTML = '<br>';\n          newCell.innerHTML += fTag.outerHTML;\n          if (isHR) newCell.innerHTML += '<br>';\n        } else {\n          var fChildren = fTag.childNodes;\n\n          while (fChildren[0]) {\n            newCell.appendChild(fChildren[0]);\n          }\n        }\n\n        list.appendChild(newCell);\n        if (!next) lastList = list;\n\n        if (!next || parentTag !== nextParent || util.isRangeFormatElement(siblingTag)) {\n          if (!firstList) firstList = list;\n\n          if ((!mergeTop || !next || parentTag !== nextParent) && !(next && util.isList(nextParent) && nextParent === originParent)) {\n            if (list.parentNode !== parentTag) parentTag.insertBefore(list, siblingTag);\n          }\n        }\n\n        util.removeItem(fTag);\n        if (mergeTop && topNumber === null) topNumber = list.children.length - 1;\n\n        if (next && (util.getRangeFormatElement(nextParent, _passComponent) !== util.getRangeFormatElement(originParent, _passComponent) || util.isList(nextParent) && util.isList(originParent) && util.getElementDepth(nextParent) !== util.getElementDepth(originParent))) {\n          list = util.createElement(command);\n        }\n\n        if (rangeTag && rangeTag.children.length === 0) util.removeItem(rangeTag);\n      }\n\n      if (topNumber) {\n        firstList = firstList.children[topNumber];\n      }\n\n      if (mergeBottom) {\n        bottomNumber = list.children.length - 1;\n        list.innerHTML += bottomEl.innerHTML;\n        lastList = list.children[bottomNumber];\n        util.removeItem(bottomEl);\n      }\n    }\n\n    this.effectNode = null;\n    return originRange;\n  },\n  _detachNested: function _detachNested(cells) {\n    var first = cells[0];\n    var last = cells[cells.length - 1];\n    var next = last.nextElementSibling;\n    var originList = first.parentNode;\n    var sibling = originList.parentNode.nextElementSibling;\n    var parentNode = originList.parentNode.parentNode;\n\n    for (var c = 0, cLen = cells.length; c < cLen; c++) {\n      parentNode.insertBefore(cells[c], sibling);\n    }\n\n    if (next && originList.children.length > 0) {\n      var newList = originList.cloneNode(false);\n      var children = originList.childNodes;\n      var index = this.util.getPositionIndex(next);\n\n      while (children[index]) {\n        newList.appendChild(children[index]);\n      }\n\n      last.appendChild(newList);\n    }\n\n    if (originList.children.length === 0) this.util.removeItem(originList);\n    this.util.mergeSameTags(parentNode);\n    var edge = this.util.getEdgeChildNodes(first, last);\n    return {\n      cc: first.parentNode,\n      sc: edge.sc,\n      ec: edge.ec\n    };\n  },\n  editInsideList: function editInsideList(remove, selectedCells) {\n    selectedCells = !selectedCells ? this.getSelectedElements().filter(function (el) {\n      return this.isListCell(el);\n    }.bind(this.util)) : selectedCells;\n    var cellsLen = selectedCells.length;\n\n    if (cellsLen === 0 || !remove && !this.util.isListCell(selectedCells[0].previousElementSibling) && !this.util.isListCell(selectedCells[cellsLen - 1].nextElementSibling)) {\n      return {\n        sc: selectedCells[0],\n        so: 0,\n        ec: selectedCells[cellsLen - 1],\n        eo: 1\n      };\n    }\n\n    var originList = selectedCells[0].parentNode;\n    var lastCell = selectedCells[cellsLen - 1];\n    var range = null;\n\n    if (remove) {\n      if (originList !== lastCell.parentNode && this.util.isList(lastCell.parentNode.parentNode) && lastCell.nextElementSibling) {\n        lastCell = lastCell.nextElementSibling;\n\n        while (lastCell) {\n          selectedCells.push(lastCell);\n          lastCell = lastCell.nextElementSibling;\n        }\n      }\n\n      range = this.plugins.list.editList.call(this, originList.nodeName.toUpperCase(), selectedCells, true);\n    } else {\n      var innerList = this.util.createElement(originList.nodeName);\n      var prev = selectedCells[0].previousElementSibling;\n      var next = lastCell.nextElementSibling;\n      var nodePath = {\n        s: null,\n        e: null,\n        sl: originList,\n        el: originList\n      };\n\n      for (var i = 0, len = cellsLen, c; i < len; i++) {\n        c = selectedCells[i];\n\n        if (c.parentNode !== originList) {\n          this.plugins.list._insiedList.call(this, originList, innerList, prev, next, nodePath);\n\n          originList = c.parentNode;\n          innerList = this.util.createElement(originList.nodeName);\n        }\n\n        prev = c.previousElementSibling;\n        next = c.nextElementSibling;\n        innerList.appendChild(c);\n      }\n\n      this.plugins.list._insiedList.call(this, originList, innerList, prev, next, nodePath);\n\n      var sc = this.util.getNodeFromPath(nodePath.s, nodePath.sl);\n      var ec = this.util.getNodeFromPath(nodePath.e, nodePath.el);\n      range = {\n        sc: sc,\n        so: 0,\n        ec: ec,\n        eo: ec.textContent.length\n      };\n    }\n\n    return range;\n  },\n  _insiedList: function _insiedList(originList, innerList, prev, next, nodePath) {\n    var insertPrev = false;\n\n    if (prev && innerList.tagName === prev.tagName) {\n      var children = innerList.children;\n\n      while (children[0]) {\n        prev.appendChild(children[0]);\n      }\n\n      innerList = prev;\n      insertPrev = true;\n    }\n\n    if (next && innerList.tagName === next.tagName) {\n      var _children = next.children;\n\n      while (_children[0]) {\n        innerList.appendChild(_children[0]);\n      }\n\n      var temp = next.nextElementSibling;\n      next.parentNode.removeChild(next);\n      next = temp;\n    }\n\n    if (!insertPrev) {\n      if (this.util.isListCell(prev)) {\n        originList = prev;\n        next = null;\n      }\n\n      originList.insertBefore(innerList, next);\n\n      if (!nodePath.s) {\n        nodePath.s = this.util.getNodePath(innerList.firstElementChild.firstChild, originList, null);\n        nodePath.sl = originList;\n      }\n\n      var slPath = originList.contains(nodePath.sl) ? this.util.getNodePath(nodePath.sl, originList) : null;\n      nodePath.e = this.util.getNodePath(innerList.lastElementChild.firstChild, originList, null);\n      nodePath.el = originList;\n      this.util.mergeSameTags(originList, [nodePath.s, nodePath.e, slPath], false);\n      this.util.mergeNestedTags(originList);\n      if (slPath) nodePath.sl = this.util.getNodeFromPath(slPath, originList);\n    }\n\n    return innerList;\n  },\n  pickup: function pickup(e) {\n    e.preventDefault();\n    e.stopPropagation();\n    var target = e.target;\n    var command = '';\n\n    while (!command && !/^UL$/i.test(target.tagName)) {\n      command = target.getAttribute('data-command');\n      target = target.parentNode;\n    }\n\n    if (!command) return;\n    var range = this.plugins.list.editList.call(this, command, null, false);\n    if (range) this.setRange(range.sc, range.so, range.ec, range.eo);\n    this.submenuOff(); // history stack\n\n    this.history.push(false);\n  }\n};","map":{"version":3,"names":["name","display","add","core","targetElement","context","list","targetButton","_list","currentList","icons","bullets","list_bullets","number","list_number","listDiv","setSubmenu","listUl","querySelector","addEventListener","pickup","bind","querySelectorAll","initMenuTarget","lang","util","createElement","className","innerHTML","toolbar","orderList","unorderList","active","element","button","icon","firstElementChild","isList","nodeName","setAttribute","addClass","test","changeElement","removeAttribute","removeClass","on","listContext","getAttribute","i","len","length","editList","command","selectedCells","detach","range","getRange","selectedFormats","getSelectedElementsAndComponents","getRange_addLine","sortByDepth","firstSel","lastSel","topEl","isListCell","isComponent","previousElementSibling","parentNode","bottomEl","nextElementSibling","originRange","sc","startContainer","so","endContainer","onlyZeroWidthSpace","startOffset","endOffset","ec","eo","isRemove","getRangeFormatElement","current","tagName","toUpperCase","j","contains","splice","currentFormat","cancel","rangeArr","tempList","passComponent","r","o","f","getParentElement","plugins","_detachNested","call","detachRangeFormatElement","push","topElParent","bottomElParent","isWysiwygDiv","mergeTop","mergeBottom","firstList","lastList","topNumber","bottomNumber","newCell","fTag","isCell","next","originParent","nextParent","parentTag","siblingTag","rangeTag","childNodes","_isIgnoreNodeChange","removeItem","isRangeFormatElement","nextSibling","copyFormatAttributes","isHR","outerHTML","fChildren","appendChild","insertBefore","children","getElementDepth","effectNode","cells","first","last","originList","sibling","c","cLen","newList","cloneNode","index","getPositionIndex","mergeSameTags","edge","getEdgeChildNodes","cc","editInsideList","remove","getSelectedElements","filter","el","cellsLen","lastCell","innerList","prev","nodePath","s","e","sl","_insiedList","getNodeFromPath","textContent","insertPrev","temp","removeChild","getNodePath","firstChild","slPath","lastElementChild","mergeNestedTags","preventDefault","stopPropagation","target","setRange","submenuOff","history"],"sources":["/Users/jirayuyungmeesuk/Desktop/ v2/client/node_modules/suneditor/src/plugins/submenu/list.js"],"sourcesContent":["/*\n * wysiwyg web editor\n *\n * suneditor.js\n * Copyright 2017 JiHong Lee.\n * MIT license.\n */\n'use strict';\n\nexport default {\n    name: 'list',\n    display: 'submenu',\n    add: function (core, targetElement) {\n        const context = core.context;\n        context.list = {\n            targetButton: targetElement,\n            _list: null,\n            currentList: '',\n            icons: {\n                bullets: core.icons.list_bullets,\n                number: core.icons.list_number\n            }\n        };\n\n        /** set submenu */\n        let listDiv = this.setSubmenu(core);\n        let listUl = listDiv.querySelector('ul');\n\n        /** add event listeners */\n        listUl.addEventListener('click', this.pickup.bind(core));\n        context.list._list = listUl.querySelectorAll('li button');\n\n        /** append target button menu */\n        core.initMenuTarget(this.name, targetElement, listDiv);\n\n        /** empty memory */\n        listDiv = null, listUl = null;\n    },\n\n    setSubmenu: function (core) {\n        const lang = core.lang;\n        const listDiv = core.util.createElement('DIV');\n\n        listDiv.className = 'se-submenu se-list-layer';\n        listDiv.innerHTML = '' +\n            '<div class=\"se-list-inner\">' +\n                '<ul class=\"se-list-basic\">' +\n                    '<li><button type=\"button\" class=\"se-btn-list se-tooltip\" data-command=\"OL\" title=\"' + lang.toolbar.orderList + '\" aria-label=\"' + lang.toolbar.orderList + '\">' +\n                        core.icons.list_number +\n                    '</button></li>' +\n                    '<li><button type=\"button\" class=\"se-btn-list se-tooltip\" data-command=\"UL\" title=\"' + lang.toolbar.unorderList + '\" aria-label=\"' + lang.toolbar.unorderList + '\">' +\n                        core.icons.list_bullets +\n                    '</button></li>' +\n                '</ul>' +\n            '</div>';\n\n        return listDiv;\n    },\n\n     /**\n     * @Override core\n     */\n    active: function (element) {\n        const button = this.context.list.targetButton;\n        const icon = button.firstElementChild;\n        const util = this.util;\n\n        if (util.isList(element)) {\n            const nodeName = element.nodeName;\n            button.setAttribute('data-focus', nodeName);\n            util.addClass(button, 'active');\n            if (/UL/i.test(nodeName)) {\n                util.changeElement(icon, this.context.list.icons.bullets);\n            } else {\n                util.changeElement(icon, this.context.list.icons.number);\n            }\n            \n            return true;\n        } else {\n            button.removeAttribute('data-focus');\n            util.changeElement(icon, this.context.list.icons.number);\n            util.removeClass(button, 'active');\n        }\n\n        return false;\n    },\n\n     /**\n     * @Override submenu\n     */\n    on: function () {\n        const listContext = this.context.list;\n        const list = listContext._list;\n        const currentList = listContext.targetButton.getAttribute('data-focus') || '';\n\n        if (currentList !== listContext.currentList) {\n            for (let i = 0, len = list.length; i < len; i++) {\n                if (currentList === list[i].getAttribute('data-command')) {\n                    this.util.addClass(list[i], 'active');\n                } else {\n                    this.util.removeClass(list[i], 'active');\n                }\n            }\n\n            listContext.currentList = currentList;\n        }\n    },\n\n    editList: function (command, selectedCells, detach) {\n        let range = this.getRange();\n        let selectedFormats = !selectedCells ? this.getSelectedElementsAndComponents(false) : selectedCells;\n\n        if (selectedFormats.length === 0) {\n            if (selectedCells) return;\n            range = this.getRange_addLine(range, null);\n            selectedFormats = this.getSelectedElementsAndComponents(false);\n            if (selectedFormats.length === 0) return;\n        }\n        \n        const util = this.util;\n        util.sortByDepth(selectedFormats, true);\n\n        // merge\n        let firstSel = selectedFormats[0];\n        let lastSel = selectedFormats[selectedFormats.length - 1];\n        let topEl = (util.isListCell(firstSel) || util.isComponent(firstSel)) && !firstSel.previousElementSibling ? firstSel.parentNode.previousElementSibling : firstSel.previousElementSibling;\n        let bottomEl = (util.isListCell(lastSel) || util.isComponent(lastSel)) && !lastSel.nextElementSibling ? lastSel.parentNode.nextElementSibling : lastSel.nextElementSibling;\n\n        const originRange = {\n            sc: range.startContainer,\n            so: (range.startContainer === range.endContainer && util.onlyZeroWidthSpace(range.startContainer) && range.startOffset === 0 && range.endOffset === 1) ? range.endOffset : range.startOffset,\n            ec: range.endContainer,\n            eo: range.endOffset\n        };\n\n        let isRemove = true;\n\n        for (let i = 0, len = selectedFormats.length; i < len; i++) {\n            if (!util.isList(util.getRangeFormatElement(selectedFormats[i], function (current) {\n                return this.getRangeFormatElement(current) && current !== selectedFormats[i];\n            }.bind(util)))) {\n                isRemove = false;\n                break;\n            }\n        }\n\n        if (isRemove && (!topEl || (firstSel.tagName !== topEl.tagName || command !== topEl.tagName.toUpperCase())) && (!bottomEl || (lastSel.tagName !== bottomEl.tagName || command !== bottomEl.tagName.toUpperCase()))) {\n            if (detach) {\n                for (let i = 0, len = selectedFormats.length; i < len; i++) {\n                    for (let j = i - 1; j >= 0; j--) {\n                        if (selectedFormats[j].contains(selectedFormats[i])) {\n                            selectedFormats.splice(i, 1);\n                            i--; len--;\n                            break;\n                        }\n                    }\n                }\n            }\n\n            const currentFormat = util.getRangeFormatElement(firstSel);\n            const cancel = currentFormat && currentFormat.tagName === command;\n            let rangeArr, tempList;\n            const passComponent = function (current) {\n                return !this.isComponent(current);\n            }.bind(util);\n            \n            if (!cancel) tempList = util.createElement(command);\n\n            for (let i = 0, len = selectedFormats.length, r, o; i < len; i++) {\n                o = util.getRangeFormatElement(selectedFormats[i], passComponent);\n                if (!o || !util.isList(o)) continue;\n\n                if (!r) {\n                    r = o;\n                    rangeArr = {r: r, f: [util.getParentElement(selectedFormats[i], 'LI')]};\n                } else {\n                    if (r !== o) {\n                        if (detach && util.isListCell(o.parentNode)) {\n                            this.plugins.list._detachNested.call(this, rangeArr.f);\n                        } else {\n                            this.detachRangeFormatElement(rangeArr.f[0].parentNode, rangeArr.f, tempList, false, true);\n                        }\n                        \n                        o = selectedFormats[i].parentNode;\n                        if (!cancel) tempList = util.createElement(command);\n                        \n                        r = o;\n                        rangeArr = {r: r, f: [util.getParentElement(selectedFormats[i], 'LI')]};\n                    } else {\n                        rangeArr.f.push(util.getParentElement(selectedFormats[i], 'LI'));\n                    }\n                }\n                \n                if (i === len - 1) {\n                    if (detach && util.isListCell(o.parentNode)) {\n                        this.plugins.list._detachNested.call(this, rangeArr.f);\n                    } else {\n                        this.detachRangeFormatElement(rangeArr.f[0].parentNode, rangeArr.f, tempList, false, true);\n                    }\n                }\n            }\n        } else {\n            const topElParent = topEl ? topEl.parentNode : topEl;\n            const bottomElParent = bottomEl ? bottomEl.parentNode : bottomEl;\n            topEl = topElParent && !util.isWysiwygDiv(topElParent) && topElParent.nodeName === command ? topElParent : topEl;\n            bottomEl = bottomElParent && !util.isWysiwygDiv(bottomElParent) && bottomElParent.nodeName === command ? bottomElParent : bottomEl;\n\n            const mergeTop = topEl && topEl.tagName === command;\n            const mergeBottom = bottomEl && bottomEl.tagName === command;\n            \n            let list = mergeTop ? topEl : util.createElement(command);\n            let firstList = null;\n            let lastList = null;\n            let topNumber = null;\n            let bottomNumber = null;\n\n            const passComponent = function (current) {\n                return !this.isComponent(current) && !this.isList(current);\n            }.bind(util);\n            \n            for (let i = 0, len = selectedFormats.length, newCell, fTag, isCell, next, originParent, nextParent, parentTag, siblingTag, rangeTag; i < len; i++) {\n                fTag = selectedFormats[i];\n                if (fTag.childNodes.length === 0 && !util._isIgnoreNodeChange(fTag)) {\n                    util.removeItem(fTag);\n                    continue;\n                }\n                next = selectedFormats[i + 1];\n                originParent = fTag.parentNode;\n                nextParent = next ? next.parentNode : null;\n                isCell = util.isListCell(fTag);\n                rangeTag = util.isRangeFormatElement(originParent) ? originParent : null;\n                parentTag = isCell && !util.isWysiwygDiv(originParent) ? originParent.parentNode : originParent;\n                siblingTag = isCell && !util.isWysiwygDiv(originParent) ? (!next || util.isListCell(parentTag)) ? originParent : originParent.nextSibling : fTag.nextSibling;\n\n                newCell = util.createElement('LI');\n                util.copyFormatAttributes(newCell, fTag);\n\n                if (i ===  0 && originRange.sc === fTag) {\n                    originRange.sc = newCell;\n                }\n                if (i === len - 1 && originRange.ec === fTag) {\n                    originRange.ec = newCell;\n                }\n\n                if (util.isComponent(fTag)) {\n                    const isHR = /^HR$/i.test(fTag.nodeName);\n                    if (!isHR) newCell.innerHTML = '<br>';\n                    newCell.innerHTML += fTag.outerHTML;\n                    if (isHR) newCell.innerHTML += '<br>';\n                } else {\n                    const fChildren = fTag.childNodes;\n                    while (fChildren[0]) {\n                        newCell.appendChild(fChildren[0]);\n                    }\n                }\n                list.appendChild(newCell);\n\n                if (!next) lastList = list;\n                if (!next || parentTag !== nextParent || util.isRangeFormatElement(siblingTag)) {\n                    if (!firstList) firstList = list;\n                    if ((!mergeTop || !next || parentTag !== nextParent) && !(next && util.isList(nextParent) && nextParent === originParent)) {\n                        if (list.parentNode !== parentTag) parentTag.insertBefore(list, siblingTag);\n                    }\n                }\n\n                util.removeItem(fTag);\n                if (mergeTop && topNumber === null) topNumber = list.children.length - 1;\n                if (next && (util.getRangeFormatElement(nextParent, passComponent) !== util.getRangeFormatElement(originParent, passComponent) || (util.isList(nextParent) && util.isList(originParent) && util.getElementDepth(nextParent) !== util.getElementDepth(originParent)))) {\n                    list = util.createElement(command);\n                }\n\n                if (rangeTag && rangeTag.children.length === 0) util.removeItem(rangeTag);\n            }\n\n            if (topNumber) {\n                firstList = firstList.children[topNumber];\n            }\n\n            if (mergeBottom) {\n                bottomNumber = list.children.length - 1;\n                list.innerHTML += bottomEl.innerHTML;\n                lastList = list.children[bottomNumber];\n                util.removeItem(bottomEl);\n            }\n        }\n        \n        this.effectNode = null;\n        return originRange;\n    },\n\n    _detachNested: function (cells) {\n        const first = cells[0];\n        const last = cells[cells.length - 1];\n        const next = last.nextElementSibling;\n        const originList = first.parentNode;\n        const sibling = originList.parentNode.nextElementSibling;\n        const parentNode = originList.parentNode.parentNode;\n\n        for (let c = 0, cLen = cells.length; c < cLen; c++) {\n            parentNode.insertBefore(cells[c], sibling);\n        }\n\n        if (next && originList.children.length > 0) {\n            const newList = originList.cloneNode(false);\n            const children = originList.childNodes;\n            const index = this.util.getPositionIndex(next);\n            while (children[index]) {\n                newList.appendChild(children[index]);\n            }\n            last.appendChild(newList);\n        }\n\n        if (originList.children.length === 0) this.util.removeItem(originList);\n        this.util.mergeSameTags(parentNode);\n\n        const edge = this.util.getEdgeChildNodes(first, last);\n\n        return {\n            cc: first.parentNode,\n            sc: edge.sc,\n            ec: edge.ec\n        };\n    },\n\n    editInsideList: function (remove, selectedCells) {\n        selectedCells = !selectedCells ? this.getSelectedElements().filter(function (el) { return this.isListCell(el); }.bind(this.util)) : selectedCells;\n        const cellsLen = selectedCells.length;\n        if (cellsLen === 0 || (!remove && (!this.util.isListCell(selectedCells[0].previousElementSibling) && !this.util.isListCell(selectedCells[cellsLen - 1].nextElementSibling)))) {\n            return {\n                sc: selectedCells[0],\n                so: 0,\n                ec: selectedCells[cellsLen - 1],\n                eo: 1\n            };\n        }\n\n        let originList = selectedCells[0].parentNode;\n        let lastCell = selectedCells[cellsLen - 1];\n        let range = null;\n\n        if (remove) {\n            if (originList !== lastCell.parentNode && this.util.isList(lastCell.parentNode.parentNode) && lastCell.nextElementSibling) {\n                lastCell = lastCell.nextElementSibling;\n                while (lastCell) {\n                    selectedCells.push(lastCell);\n                    lastCell = lastCell.nextElementSibling;\n                }\n            }\n            range = this.plugins.list.editList.call(this, originList.nodeName.toUpperCase(), selectedCells, true);\n        } else {\n            let innerList = this.util.createElement(originList.nodeName);\n            let prev = selectedCells[0].previousElementSibling;\n            let next = lastCell.nextElementSibling;\n            const nodePath = { s: null, e: null, sl: originList, el: originList };\n\n            for (let i = 0, len = cellsLen, c; i < len; i++) {\n                c = selectedCells[i];\n                if (c.parentNode !== originList) {\n                    this.plugins.list._insiedList.call(this, originList, innerList, prev, next, nodePath);\n                    originList = c.parentNode;\n                    innerList = this.util.createElement(originList.nodeName);\n                }\n                \n                prev = c.previousElementSibling;\n                next = c.nextElementSibling;\n                innerList.appendChild(c);\n            }\n            \n            this.plugins.list._insiedList.call(this, originList, innerList, prev, next, nodePath);\n\n            const sc = this.util.getNodeFromPath(nodePath.s, nodePath.sl);\n            const ec = this.util.getNodeFromPath(nodePath.e, nodePath.el);\n            range = {\n                sc: sc,\n                so: 0,\n                ec: ec,\n                eo: ec.textContent.length\n            };\n        }\n\n        return range;\n    },\n\n    _insiedList: function (originList, innerList, prev, next, nodePath) {\n        let insertPrev = false;\n\n        if (prev && innerList.tagName === prev.tagName) {\n            const children = innerList.children;\n            while (children[0]) {\n                prev.appendChild(children[0]);\n            }\n\n            innerList = prev;\n            insertPrev = true;\n        }\n\n        if (next && innerList.tagName === next.tagName) {\n            const children = next.children;\n            while (children[0]) {\n                innerList.appendChild(children[0]);\n            }\n\n            const temp = next.nextElementSibling;\n            next.parentNode.removeChild(next);\n            next = temp;\n        }\n\n        if (!insertPrev) {\n            if (this.util.isListCell(prev)) {\n                originList = prev;\n                next = null;\n            }\n\n            originList.insertBefore(innerList, next);\n\n            if (!nodePath.s) {\n                nodePath.s = this.util.getNodePath(innerList.firstElementChild.firstChild, originList, null);\n                nodePath.sl = originList;\n            }\n\n            const slPath = originList.contains(nodePath.sl) ? this.util.getNodePath(nodePath.sl, originList) : null;\n            nodePath.e = this.util.getNodePath(innerList.lastElementChild.firstChild, originList, null);\n            nodePath.el = originList;\n\n            this.util.mergeSameTags(originList, [nodePath.s, nodePath.e, slPath], false);\n            this.util.mergeNestedTags(originList);\n            if (slPath) nodePath.sl = this.util.getNodeFromPath(slPath, originList);\n        }\n\n        return innerList;\n    },\n\n    pickup: function (e) {\n        e.preventDefault();\n        e.stopPropagation();\n\n        let target = e.target;\n        let command = '';\n\n        while (!command && !/^UL$/i.test(target.tagName)) {\n            command = target.getAttribute('data-command');\n            target = target.parentNode;\n        }\n\n        if (!command) return;\n\n        const range = this.plugins.list.editList.call(this, command, null, false);\n        if (range) this.setRange(range.sc, range.so, range.ec, range.eo);\n\n        this.submenuOff();\n\n        // history stack\n        this.history.push(false);\n    }\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}