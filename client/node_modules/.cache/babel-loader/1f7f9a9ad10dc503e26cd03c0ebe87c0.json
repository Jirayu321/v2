{"ast":null,"code":"/*\r\n * wysiwyg web editor\r\n *\r\n * suneditor.js\r\n * Copyright 2017 JiHong Lee.\r\n * MIT license.\r\n */\n'use strict';\n\nimport _icons from '../assets/defaultIcons';\nimport _defaultLang from '../lang/en';\nimport util from './util';\nexport default {\n  /**\r\n   * @description document create\r\n   * @param {Element} element Textarea\r\n   * @param {Object} options Options\r\n   * @returns {Object}\r\n   */\n  init: function init(element, options) {\n    if (typeof options !== 'object') options = {};\n    var doc = document;\n    /** --- init options --- */\n\n    this._initOptions(element, options); // suneditor div\n\n\n    var top_div = doc.createElement('DIV');\n    top_div.className = 'sun-editor' + (options.rtl ? ' se-rtl' : '');\n    if (element.id) top_div.id = 'suneditor_' + element.id; // relative div\n\n    var relative = doc.createElement('DIV');\n    relative.className = 'se-container'; // toolbar\n\n    var tool_bar = this._createToolBar(doc, options.buttonList, options.plugins, options);\n\n    var toolbarShadow = tool_bar.element.cloneNode(false);\n    toolbarShadow.className += ' se-toolbar-shadow';\n    tool_bar.element.style.visibility = 'hidden';\n    if (tool_bar.pluginCallButtons.math) this._checkKatexMath(options.katex);\n    var arrow = doc.createElement('DIV');\n    arrow.className = 'se-arrow'; // sticky toolbar dummy\n\n    var sticky_dummy = doc.createElement('DIV');\n    sticky_dummy.className = 'se-toolbar-sticky-dummy'; // inner editor div\n\n    var editor_div = doc.createElement('DIV');\n    editor_div.className = 'se-wrapper';\n    /** --- init elements and create bottom bar --- */\n\n    var initElements = this._initElements(options, top_div, tool_bar.element, arrow);\n\n    var bottomBar = initElements.bottomBar;\n    var wysiwyg_div = initElements.wysiwygFrame;\n    var placeholder_span = initElements.placeholder;\n    var textarea = initElements.codeView; // resizing bar\n\n    var resizing_bar = bottomBar.resizingBar;\n    var navigation = bottomBar.navigation;\n    var char_wrapper = bottomBar.charWrapper;\n    var char_counter = bottomBar.charCounter; // loading box\n\n    var loading_box = doc.createElement('DIV');\n    loading_box.className = 'se-loading-box sun-editor-common';\n    loading_box.innerHTML = '<div class=\"se-loading-effect\"></div>'; // enter line\n\n    var line_breaker = doc.createElement('DIV');\n    line_breaker.className = 'se-line-breaker';\n    line_breaker.innerHTML = '<button class=\"se-btn\">' + options.icons.line_break + '</button>';\n    var line_breaker_t = doc.createElement('DIV');\n    line_breaker_t.className += 'se-line-breaker-component';\n    var line_breaker_b = line_breaker_t.cloneNode(true);\n    line_breaker_t.innerHTML = line_breaker_b.innerHTML = options.icons.line_break; // resize operation background\n\n    var resize_back = doc.createElement('DIV');\n    resize_back.className = 'se-resizing-back'; // toolbar container\n\n    var toolbarContainer = options.toolbarContainer;\n\n    if (toolbarContainer) {\n      toolbarContainer.appendChild(tool_bar.element);\n      toolbarContainer.appendChild(toolbarShadow);\n    } // resizingbar\n\n\n    var resizingBarContainer = options.resizingBarContainer;\n    if (resizing_bar && resizingBarContainer) resizingBarContainer.appendChild(resizing_bar);\n    /** append html */\n\n    editor_div.appendChild(textarea);\n    if (placeholder_span) editor_div.appendChild(placeholder_span);\n\n    if (!toolbarContainer) {\n      relative.appendChild(tool_bar.element);\n      relative.appendChild(toolbarShadow);\n    }\n\n    relative.appendChild(sticky_dummy);\n    relative.appendChild(editor_div);\n    relative.appendChild(resize_back);\n    relative.appendChild(loading_box);\n    relative.appendChild(line_breaker);\n    relative.appendChild(line_breaker_t);\n    relative.appendChild(line_breaker_b);\n    if (resizing_bar && !resizingBarContainer) relative.appendChild(resizing_bar);\n    top_div.appendChild(relative);\n    textarea = this._checkCodeMirror(options, textarea);\n    return {\n      constructed: {\n        _top: top_div,\n        _relative: relative,\n        _toolBar: tool_bar.element,\n        _toolbarShadow: toolbarShadow,\n        _menuTray: tool_bar._menuTray,\n        _editorArea: editor_div,\n        _wysiwygArea: wysiwyg_div,\n        _codeArea: textarea,\n        _placeholder: placeholder_span,\n        _resizingBar: resizing_bar,\n        _navigation: navigation,\n        _charWrapper: char_wrapper,\n        _charCounter: char_counter,\n        _loading: loading_box,\n        _lineBreaker: line_breaker,\n        _lineBreaker_t: line_breaker_t,\n        _lineBreaker_b: line_breaker_b,\n        _resizeBack: resize_back,\n        _stickyDummy: sticky_dummy,\n        _arrow: arrow\n      },\n      options: options,\n      plugins: tool_bar.plugins,\n      pluginCallButtons: tool_bar.pluginCallButtons,\n      _responsiveButtons: tool_bar.responsiveButtons\n    };\n  },\n\n  /**\r\n   * @description Check the CodeMirror option to apply the CodeMirror and return the CodeMirror element.\r\n   * @param {Object} options options\r\n   * @param {Element} textarea textarea element\r\n   * @private\r\n   */\n  _checkCodeMirror: function _checkCodeMirror(options, textarea) {\n    if (options.codeMirror) {\n      var cmOptions = [{\n        mode: 'htmlmixed',\n        htmlMode: true,\n        lineNumbers: true,\n        lineWrapping: true\n      }, options.codeMirror.options || {}].reduce(function (init, option) {\n        for (var key in option) {\n          if (util.hasOwn(option, key)) init[key] = option[key];\n        }\n\n        return init;\n      }, {});\n\n      if (options.height === 'auto') {\n        cmOptions.viewportMargin = Infinity;\n        cmOptions.height = 'auto';\n      }\n\n      var cm = options.codeMirror.src.fromTextArea(textarea, cmOptions);\n      cm.display.wrapper.style.cssText = textarea.style.cssText;\n      options.codeMirrorEditor = cm;\n      textarea = cm.display.wrapper;\n      textarea.className += ' se-wrapper-code-mirror';\n    }\n\n    return textarea;\n  },\n\n  /**\r\n   * @description Check for a katex object.\r\n   * @param {Object} katex katex object\r\n   * @private\r\n   */\n  _checkKatexMath: function _checkKatexMath(katex) {\n    if (!katex) throw Error('[SUNEDITOR.create.fail] To use the math button you need to add a \"katex\" object to the options.');\n    var katexOptions = [{\n      throwOnError: false\n    }, katex.options || {}].reduce(function (init, option) {\n      for (var key in option) {\n        if (util.hasOwn(option, key)) init[key] = option[key];\n      }\n\n      return init;\n    }, {});\n    katex.options = katexOptions;\n  },\n\n  /**\r\n   * @description Add or reset options\r\n   * @param {Object} mergeOptions New options property\r\n   * @param {Object} context Context object of core\r\n   * @param {Object} originOptions Origin options\r\n   * @returns {Object} pluginCallButtons\r\n   * @private\r\n   */\n  _setOptions: function _setOptions(mergeOptions, context, originOptions) {\n    this._initOptions(context.element.originElement, mergeOptions);\n\n    var el = context.element;\n    var relative = el.relative;\n    var editorArea = el.editorArea;\n    var isNewToolbarContainer = mergeOptions.toolbarContainer && mergeOptions.toolbarContainer !== originOptions.toolbarContainer;\n    var isNewToolbar = mergeOptions.lang !== originOptions.lang || mergeOptions.buttonList !== originOptions.buttonList || mergeOptions.mode !== originOptions.mode || isNewToolbarContainer;\n\n    var tool_bar = this._createToolBar(document, isNewToolbar ? mergeOptions.buttonList : originOptions.buttonList, mergeOptions.plugins, mergeOptions);\n\n    if (tool_bar.pluginCallButtons.math) this._checkKatexMath(mergeOptions.katex);\n    var arrow = document.createElement('DIV');\n    arrow.className = 'se-arrow';\n\n    if (isNewToolbar) {\n      tool_bar.element.style.visibility = 'hidden'; // toolbar container\n\n      if (isNewToolbarContainer) {\n        mergeOptions.toolbarContainer.appendChild(tool_bar.element);\n        el.toolbar.parentElement.removeChild(el.toolbar);\n      } else {\n        el.toolbar.parentElement.replaceChild(tool_bar.element, el.toolbar);\n      }\n\n      el.toolbar = tool_bar.element;\n      el._menuTray = tool_bar._menuTray;\n      el._arrow = arrow;\n    }\n\n    var initElements = this._initElements(mergeOptions, el.topArea, isNewToolbar ? tool_bar.element : el.toolbar, arrow);\n\n    var bottomBar = initElements.bottomBar;\n    var wysiwygFrame = initElements.wysiwygFrame;\n    var placeholder_span = initElements.placeholder;\n    var code = initElements.codeView;\n    if (el.resizingBar) util.removeItem(el.resizingBar);\n\n    if (bottomBar.resizingBar) {\n      if (mergeOptions.resizingBarContainer && mergeOptions.resizingBarContainer !== originOptions.resizingBarContainer) {\n        mergeOptions.resizingBarContainer.appendChild(bottomBar.resizingBar);\n      } else {\n        relative.appendChild(bottomBar.resizingBar);\n      }\n    }\n\n    editorArea.innerHTML = '';\n    editorArea.appendChild(code);\n    if (placeholder_span) editorArea.appendChild(placeholder_span);\n    code = this._checkCodeMirror(mergeOptions, code);\n    el.resizingBar = bottomBar.resizingBar;\n    el.navigation = bottomBar.navigation;\n    el.charWrapper = bottomBar.charWrapper;\n    el.charCounter = bottomBar.charCounter;\n    el.wysiwygFrame = wysiwygFrame;\n    el.code = code;\n    el.placeholder = placeholder_span;\n    if (mergeOptions.rtl) util.addClass(el.topArea, 'se-rtl');else util.removeClass(el.topArea, 'se-rtl');\n    return {\n      callButtons: tool_bar.pluginCallButtons,\n      plugins: tool_bar.plugins,\n      toolbar: tool_bar\n    };\n  },\n\n  /**\r\n   * @description Initialize property of suneditor elements\r\n   * @param {Object} options Options\r\n   * @param {Element} topDiv Suneditor top div\r\n   * @param {Element} toolBar Tool bar\r\n   * @param {Element} toolBarArrow Tool bar arrow (balloon editor)\r\n   * @returns {Object} Bottom bar elements (resizingBar, navigation, charWrapper, charCounter)\r\n   * @private\r\n   */\n  _initElements: function _initElements(options, topDiv, toolBar, toolBarArrow) {\n    /** top div */\n    topDiv.style.cssText = options._editorStyles.top;\n    /** toolbar */\n\n    if (/inline/i.test(options.mode)) {\n      toolBar.className += ' se-toolbar-inline';\n      toolBar.style.width = options.toolbarWidth;\n    } else if (/balloon/i.test(options.mode)) {\n      toolBar.className += ' se-toolbar-balloon';\n      toolBar.style.width = options.toolbarWidth;\n      toolBar.appendChild(toolBarArrow);\n    }\n    /** editor */\n    // wysiwyg div or iframe\n\n\n    var wysiwygDiv = document.createElement(!options.iframe ? 'DIV' : 'IFRAME');\n    wysiwygDiv.className = 'se-wrapper-inner se-wrapper-wysiwyg';\n\n    if (!options.iframe) {\n      wysiwygDiv.setAttribute('contenteditable', true);\n      wysiwygDiv.setAttribute('scrolling', 'auto');\n\n      for (var key in options.iframeAttributes) {\n        wysiwygDiv.setAttribute(key, options.iframeAttributes[key]);\n      }\n\n      wysiwygDiv.className += ' ' + options._editableClass;\n      wysiwygDiv.style.cssText = options._editorStyles.frame + options._editorStyles.editor;\n      wysiwygDiv.className += options.className;\n    } else {\n      wysiwygDiv.allowFullscreen = true;\n      wysiwygDiv.frameBorder = 0;\n      wysiwygDiv.style.cssText = options._editorStyles.frame;\n      wysiwygDiv.className += options.className;\n    } // textarea for code view\n\n\n    var textarea = document.createElement('TEXTAREA');\n    textarea.className = 'se-wrapper-inner se-wrapper-code' + options.className;\n    textarea.style.cssText = options._editorStyles.frame;\n    textarea.style.display = 'none';\n    if (options.height === 'auto') textarea.style.overflow = 'hidden';\n    /** resize bar */\n\n    var resizingBar = null;\n    var navigation = null;\n    var charWrapper = null;\n    var charCounter = null;\n\n    if (options.resizingBar) {\n      resizingBar = document.createElement('DIV');\n      resizingBar.className = 'se-resizing-bar sun-editor-common';\n      /** navigation */\n\n      navigation = document.createElement('DIV');\n      navigation.className = 'se-navigation sun-editor-common';\n      resizingBar.appendChild(navigation);\n      /** char counter */\n\n      if (options.charCounter) {\n        charWrapper = document.createElement('DIV');\n        charWrapper.className = 'se-char-counter-wrapper';\n\n        if (options.charCounterLabel) {\n          var charLabel = document.createElement('SPAN');\n          charLabel.className = 'se-char-label';\n          charLabel.textContent = options.charCounterLabel;\n          charWrapper.appendChild(charLabel);\n        }\n\n        charCounter = document.createElement('SPAN');\n        charCounter.className = 'se-char-counter';\n        charCounter.textContent = '0';\n        charWrapper.appendChild(charCounter);\n\n        if (options.maxCharCount > 0) {\n          var char_max = document.createElement('SPAN');\n          char_max.textContent = ' / ' + options.maxCharCount;\n          charWrapper.appendChild(char_max);\n        }\n\n        resizingBar.appendChild(charWrapper);\n      }\n    }\n\n    var placeholder = null;\n\n    if (options.placeholder) {\n      placeholder = document.createElement('SPAN');\n      placeholder.className = 'se-placeholder';\n      placeholder.innerText = options.placeholder;\n    }\n\n    return {\n      bottomBar: {\n        resizingBar: resizingBar,\n        navigation: navigation,\n        charWrapper: charWrapper,\n        charCounter: charCounter\n      },\n      wysiwygFrame: wysiwygDiv,\n      codeView: textarea,\n      placeholder: placeholder\n    };\n  },\n\n  /**\r\n   * @description Initialize options\r\n   * @param {Element} element Options object\r\n   * @param {Object} options Options object\r\n   * @private\r\n   */\n  _initOptions: function _initOptions(element, options) {\n    var plugins = {};\n\n    if (options.plugins) {\n      var _plugins = options.plugins;\n      var pluginsValues = _plugins.length ? _plugins : Object.keys(_plugins).map(function (name) {\n        return _plugins[name];\n      });\n\n      for (var i = 0, len = pluginsValues.length, p; i < len; i++) {\n        p = pluginsValues[i].default || pluginsValues[i];\n        plugins[p.name] = p;\n      }\n    }\n\n    options.plugins = plugins;\n    /** Values */\n\n    options.lang = options.lang || _defaultLang;\n    options.value = typeof options.value === 'string' ? options.value : null;\n    options.historyStackDelayTime = typeof options.historyStackDelayTime === 'number' ? options.historyStackDelayTime : 400;\n    options.frameAttrbutes = options.frameAttrbutes || {}; // tag style\n\n    options.defaultTag = typeof options.defaultTag === 'string' && options.defaultTag.length > 0 ? options.defaultTag : 'p';\n    var textTags = options.textTags = [{\n      bold: 'STRONG',\n      underline: 'U',\n      italic: 'EM',\n      strike: 'DEL',\n      sub: 'SUB',\n      sup: 'SUP'\n    }, options.textTags || {}].reduce(function (_default, _new) {\n      for (var key in _new) {\n        _default[key] = _new[key];\n      }\n\n      return _default;\n    }, {});\n    options._textTagsMap = {\n      'strong': textTags.bold.toLowerCase(),\n      'b': textTags.bold.toLowerCase(),\n      'u': textTags.underline.toLowerCase(),\n      'ins': textTags.underline.toLowerCase(),\n      'em': textTags.italic.toLowerCase(),\n      'i': textTags.italic.toLowerCase(),\n      'del': textTags.strike.toLowerCase(),\n      'strike': textTags.strike.toLowerCase(),\n      's': textTags.strike.toLowerCase(),\n      'sub': textTags.sub.toLowerCase(),\n      'sup': textTags.sup.toLowerCase()\n    };\n    options._defaultCommand = {\n      bold: options.textTags.bold,\n      underline: options.textTags.underline,\n      italic: options.textTags.italic,\n      strike: options.textTags.strike,\n      subscript: options.textTags.sub,\n      superscript: options.textTags.sup\n    };\n    /** Whitelist, Blacklist */\n\n    var whitelist = 'br|p|div|pre|blockquote|h1|h2|h3|h4|h5|h6|ol|ul|li|hr|figure|figcaption|img|iframe|audio|video|source|table|thead|tbody|tr|th|td|a|b|strong|var|i|em|u|ins|s|span|strike|del|sub|sup|code|svg|path|details|summary'; // tags\n\n    options.tagsBlacklist = options.tagsBlacklist || '';\n    options._defaultTagsWhitelist = typeof options._defaultTagsWhitelist === 'string' ? options._defaultTagsWhitelist : whitelist;\n    options._editorTagsWhitelist = options.addTagsWhitelist === '*' ? '*' : this._setWhitelist(options._defaultTagsWhitelist + (typeof options.addTagsWhitelist === 'string' && options.addTagsWhitelist.length > 0 ? '|' + options.addTagsWhitelist : ''), options.tagsBlacklist); // paste tags\n\n    options.pasteTagsBlacklist = options.tagsBlacklist + (options.tagsBlacklist && options.pasteTagsBlacklist ? '|' + options.pasteTagsBlacklist : options.pasteTagsBlacklist || '');\n    options.pasteTagsWhitelist = options.pasteTagsWhitelist === '*' ? '*' : this._setWhitelist(typeof options.pasteTagsWhitelist === 'string' ? options.pasteTagsWhitelist : options._editorTagsWhitelist, options.pasteTagsBlacklist); // tag attributes\n\n    options.attributesWhitelist = !options.attributesWhitelist || typeof options.attributesWhitelist !== 'object' ? null : options.attributesWhitelist;\n    options.attributesBlacklist = !options.attributesBlacklist || typeof options.attributesBlacklist !== 'object' ? null : options.attributesBlacklist;\n    /** Layout */\n\n    options.mode = options.mode || 'classic'; // classic, inline, balloon, balloon-always\n\n    options.rtl = !!options.rtl;\n    options.lineAttrReset = typeof options.lineAttrReset === 'string' && options.lineAttrReset ? options.lineAttrReset === '*' ? '*' : new RegExp('^(' + options.lineAttrReset + ')$', 'i') : null;\n    options._editableClass = 'sun-editor-editable' + (options.rtl ? ' se-rtl' : '');\n    options._printClass = typeof options._printClass === 'string' ? options._printClass : null;\n    options.toolbarWidth = options.toolbarWidth ? util.isNumber(options.toolbarWidth) ? options.toolbarWidth + 'px' : options.toolbarWidth : 'auto';\n    options.toolbarContainer = typeof options.toolbarContainer === 'string' ? document.querySelector(options.toolbarContainer) : options.toolbarContainer;\n    options.stickyToolbar = /balloon/i.test(options.mode) || !!options.toolbarContainer ? -1 : options.stickyToolbar === undefined ? 0 : /^\\d+/.test(options.stickyToolbar) ? util.getNumber(options.stickyToolbar, 0) : -1;\n    options.hideToolbar = !!options.hideToolbar;\n    options.fullScreenOffset = options.fullScreenOffset === undefined ? 0 : /^\\d+/.test(options.fullScreenOffset) ? util.getNumber(options.fullScreenOffset, 0) : 0;\n    options.fullPage = !!options.fullPage;\n    options.iframe = options.fullPage || !!options.iframe;\n    options.iframeAttributes = options.iframeAttributes || {};\n    options.iframeCSSFileName = options.iframe ? typeof options.iframeCSSFileName === 'string' ? [options.iframeCSSFileName] : options.iframeCSSFileName || ['suneditor'] : null;\n    options.previewTemplate = typeof options.previewTemplate === 'string' ? options.previewTemplate : null;\n    options.printTemplate = typeof options.printTemplate === 'string' ? options.printTemplate : null;\n    /** CodeMirror object */\n\n    options.codeMirror = options.codeMirror ? options.codeMirror.src ? options.codeMirror : {\n      src: options.codeMirror\n    } : null;\n    /** katex object (Math plugin) */\n\n    options.katex = options.katex ? options.katex.src ? options.katex : {\n      src: options.katex\n    } : null;\n    options.mathFontSize = !!options.mathFontSize ? options.mathFontSize : [{\n      text: '1',\n      value: '1em'\n    }, {\n      text: '1.5',\n      value: '1.5em'\n    }, {\n      text: '2',\n      value: '2em'\n    }, {\n      text: '2.5',\n      value: '2.5em'\n    }];\n    /** Display */\n\n    options.position = typeof options.position === 'string' ? options.position : null;\n    options.display = options.display || (element.style.display === 'none' || !element.style.display ? 'block' : element.style.display);\n    options.popupDisplay = options.popupDisplay || 'full';\n    /** Bottom resizing bar */\n\n    options.resizingBar = options.resizingBar === undefined ? /inline|balloon/i.test(options.mode) ? false : true : options.resizingBar;\n    options.showPathLabel = !options.resizingBar ? false : typeof options.showPathLabel === 'boolean' ? options.showPathLabel : true;\n    options.resizeEnable = options.resizeEnable === undefined ? true : !!options.resizeEnable;\n    options.resizingBarContainer = typeof options.resizingBarContainer === 'string' ? document.querySelector(options.resizingBarContainer) : options.resizingBarContainer;\n    /** Character count */\n\n    options.charCounter = options.maxCharCount > 0 ? true : typeof options.charCounter === 'boolean' ? options.charCounter : false;\n    options.charCounterType = typeof options.charCounterType === 'string' ? options.charCounterType : 'char';\n    options.charCounterLabel = typeof options.charCounterLabel === 'string' ? options.charCounterLabel.trim() : null;\n    options.maxCharCount = util.isNumber(options.maxCharCount) && options.maxCharCount > -1 ? options.maxCharCount * 1 : null;\n    /** Width size */\n\n    options.width = options.width ? util.isNumber(options.width) ? options.width + 'px' : options.width : element.clientWidth ? element.clientWidth + 'px' : '100%';\n    options.minWidth = (util.isNumber(options.minWidth) ? options.minWidth + 'px' : options.minWidth) || '';\n    options.maxWidth = (util.isNumber(options.maxWidth) ? options.maxWidth + 'px' : options.maxWidth) || '';\n    /** Height size */\n\n    options.height = options.height ? util.isNumber(options.height) ? options.height + 'px' : options.height : element.clientHeight ? element.clientHeight + 'px' : 'auto';\n    options.minHeight = (util.isNumber(options.minHeight) ? options.minHeight + 'px' : options.minHeight) || '';\n    options.maxHeight = (util.isNumber(options.maxHeight) ? options.maxHeight + 'px' : options.maxHeight) || '';\n    /** Editing area */\n\n    options.className = typeof options.className === 'string' && options.className.length > 0 ? ' ' + options.className : '';\n    options.defaultStyle = typeof options.defaultStyle === 'string' ? options.defaultStyle : '';\n    /** Defining menu items */\n\n    options.font = !options.font ? ['Arial', 'Comic Sans MS', 'Courier New', 'Impact', 'Georgia', 'tahoma', 'Trebuchet MS', 'Verdana'] : options.font;\n    options.fontSize = !options.fontSize ? null : options.fontSize;\n    options.formats = !options.formats ? null : options.formats;\n    options.colorList = !options.colorList ? null : options.colorList;\n    options.lineHeights = !options.lineHeights ? null : options.lineHeights;\n    options.paragraphStyles = !options.paragraphStyles ? null : options.paragraphStyles;\n    options.textStyles = !options.textStyles ? null : options.textStyles;\n    options.fontSizeUnit = typeof options.fontSizeUnit === 'string' ? options.fontSizeUnit.trim().toLowerCase() || 'px' : 'px';\n    options.alignItems = typeof options.alignItems === 'object' ? options.alignItems : options.rtl ? ['right', 'center', 'left', 'justify'] : ['left', 'center', 'right', 'justify'];\n    /** Image */\n\n    options.imageResizing = options.imageResizing === undefined ? true : options.imageResizing;\n    options.imageHeightShow = options.imageHeightShow === undefined ? true : !!options.imageHeightShow;\n    options.imageAlignShow = options.imageAlignShow === undefined ? true : !!options.imageAlignShow;\n    options.imageWidth = !options.imageWidth ? 'auto' : util.isNumber(options.imageWidth) ? options.imageWidth + 'px' : options.imageWidth;\n    options.imageHeight = !options.imageHeight ? 'auto' : util.isNumber(options.imageHeight) ? options.imageHeight + 'px' : options.imageHeight;\n    options.imageSizeOnlyPercentage = !!options.imageSizeOnlyPercentage;\n    options._imageSizeUnit = options.imageSizeOnlyPercentage ? '%' : 'px';\n    options.imageRotation = options.imageRotation !== undefined ? options.imageRotation : !(options.imageSizeOnlyPercentage || !options.imageHeightShow);\n    options.imageFileInput = options.imageFileInput === undefined ? true : options.imageFileInput;\n    options.imageUrlInput = options.imageUrlInput === undefined || !options.imageFileInput ? true : options.imageUrlInput;\n    options.imageUploadHeader = options.imageUploadHeader || null;\n    options.imageUploadUrl = typeof options.imageUploadUrl === 'string' ? options.imageUploadUrl : null;\n    options.imageUploadSizeLimit = /\\d+/.test(options.imageUploadSizeLimit) ? util.getNumber(options.imageUploadSizeLimit, 0) : null;\n    options.imageMultipleFile = !!options.imageMultipleFile;\n    options.imageAccept = typeof options.imageAccept !== 'string' || options.imageAccept.trim() === \"*\" ? 'image/*' : options.imageAccept.trim() || 'image/*';\n    /** Image - image gallery */\n\n    options.imageGalleryUrl = typeof options.imageGalleryUrl === 'string' ? options.imageGalleryUrl : null;\n    options.imageGalleryHeader = options.imageGalleryHeader || null;\n    /** Video */\n\n    options.videoResizing = options.videoResizing === undefined ? true : options.videoResizing;\n    options.videoHeightShow = options.videoHeightShow === undefined ? true : !!options.videoHeightShow;\n    options.videoAlignShow = options.videoAlignShow === undefined ? true : !!options.videoAlignShow;\n    options.videoRatioShow = options.videoRatioShow === undefined ? true : !!options.videoRatioShow;\n    options.videoWidth = !options.videoWidth || !util.getNumber(options.videoWidth, 0) ? '' : util.isNumber(options.videoWidth) ? options.videoWidth + 'px' : options.videoWidth;\n    options.videoHeight = !options.videoHeight || !util.getNumber(options.videoHeight, 0) ? '' : util.isNumber(options.videoHeight) ? options.videoHeight + 'px' : options.videoHeight;\n    options.videoSizeOnlyPercentage = !!options.videoSizeOnlyPercentage;\n    options._videoSizeUnit = options.videoSizeOnlyPercentage ? '%' : 'px';\n    options.videoRotation = options.videoRotation !== undefined ? options.videoRotation : !(options.videoSizeOnlyPercentage || !options.videoHeightShow);\n    options.videoRatio = util.getNumber(options.videoRatio, 4) || 0.5625;\n    options.videoRatioList = !options.videoRatioList ? null : options.videoRatioList;\n    options.youtubeQuery = (options.youtubeQuery || '').replace('?', '');\n    options.videoFileInput = !!options.videoFileInput;\n    options.videoUrlInput = options.videoUrlInput === undefined || !options.videoFileInput ? true : options.videoUrlInput;\n    options.videoUploadHeader = options.videoUploadHeader || null;\n    options.videoUploadUrl = typeof options.videoUploadUrl === 'string' ? options.videoUploadUrl : null;\n    options.videoUploadSizeLimit = /\\d+/.test(options.videoUploadSizeLimit) ? util.getNumber(options.videoUploadSizeLimit, 0) : null;\n    options.videoMultipleFile = !!options.videoMultipleFile;\n    options.videoTagAttrs = options.videoTagAttrs || null;\n    options.videoIframeAttrs = options.videoIframeAttrs || null;\n    options.videoAccept = typeof options.videoAccept !== 'string' || options.videoAccept.trim() === \"*\" ? 'video/*' : options.videoAccept.trim() || 'video/*';\n    /** Audio */\n\n    options.audioWidth = !options.audioWidth ? '' : util.isNumber(options.audioWidth) ? options.audioWidth + 'px' : options.audioWidth;\n    options.audioHeight = !options.audioHeight ? '' : util.isNumber(options.audioHeight) ? options.audioHeight + 'px' : options.audioHeight;\n    options.audioFileInput = !!options.audioFileInput;\n    options.audioUrlInput = options.audioUrlInput === undefined || !options.audioFileInput ? true : options.audioUrlInput;\n    options.audioUploadHeader = options.audioUploadHeader || null;\n    options.audioUploadUrl = typeof options.audioUploadUrl === 'string' ? options.audioUploadUrl : null;\n    options.audioUploadSizeLimit = /\\d+/.test(options.audioUploadSizeLimit) ? util.getNumber(options.audioUploadSizeLimit, 0) : null;\n    options.audioMultipleFile = !!options.audioMultipleFile;\n    options.audioTagAttrs = options.audioTagAttrs || null;\n    options.audioAccept = typeof options.audioAccept !== 'string' || options.audioAccept.trim() === \"*\" ? 'audio/*' : options.audioAccept.trim() || 'audio/*';\n    /** Table */\n\n    options.tableCellControllerPosition = typeof options.tableCellControllerPosition === 'string' ? options.tableCellControllerPosition.toLowerCase() : 'cell';\n    /** Link */\n\n    options.linkTargetNewWindow = !!options.linkTargetNewWindow;\n    options.linkProtocol = typeof options.linkProtocol === 'string' ? options.linkProtocol : null;\n    options.linkRel = Array.isArray(options.linkRel) ? options.linkRel : [];\n    options.linkRelDefault = options.linkRelDefault || {};\n    /** HR */\n    // options.hrItems = options.hrItems;\n\n    /** Key actions */\n\n    options.tabDisable = !!options.tabDisable;\n    options.shortcutsDisable = Array.isArray(options.shortcutsDisable) ? options.shortcutsDisable : [];\n    options.shortcutsHint = options.shortcutsHint === undefined ? true : !!options.shortcutsHint;\n    /** Defining save button */\n\n    options.callBackSave = !options.callBackSave ? null : options.callBackSave;\n    /** Templates Array */\n\n    options.templates = !options.templates ? null : options.templates;\n    /** ETC */\n\n    options.placeholder = typeof options.placeholder === 'string' ? options.placeholder : null;\n    options.mediaAutoSelect = options.mediaAutoSelect === undefined ? true : !!options.mediaAutoSelect;\n    /** Buttons */\n\n    options.buttonList = !!options.buttonList ? options.buttonList : [['undo', 'redo'], ['bold', 'underline', 'italic', 'strike', 'subscript', 'superscript'], ['removeFormat'], ['outdent', 'indent'], ['fullScreen', 'showBlocks', 'codeView'], ['preview', 'print']];\n    /** RTL - buttons */\n\n    if (options.rtl) {\n      options.buttonList = options.buttonList.reverse();\n    }\n    /** --- Define icons --- */\n    // custom icons\n\n\n    options.icons = !options.icons || typeof options.icons !== 'object' ? _icons : [_icons, options.icons].reduce(function (_default, _new) {\n      for (var key in _new) {\n        if (util.hasOwn(_new, key)) _default[key] = _new[key];\n      }\n\n      return _default;\n    }, {}); // rtl icons\n\n    options.icons = !options.rtl ? options.icons : [options.icons, options.icons.rtl].reduce(function (_default, _new) {\n      for (var key in _new) {\n        if (util.hasOwn(_new, key)) _default[key] = _new[key];\n      }\n\n      return _default;\n    }, {});\n    /** Private options */\n    // options.__defaultFontSize;\n\n    options.__listCommonStyle = options.__listCommonStyle || ['fontSize', 'color', 'fontFamily', 'fontWeight', 'fontStyle'];\n    /** _init options */\n\n    options._editorStyles = util._setDefaultOptionStyle(options, options.defaultStyle);\n  },\n  _setWhitelist: function _setWhitelist(whitelist, blacklist) {\n    if (typeof blacklist !== 'string') return whitelist;\n    blacklist = blacklist.split('|');\n    whitelist = whitelist.split('|');\n\n    for (var i = 0, len = blacklist.length, index; i < len; i++) {\n      index = whitelist.indexOf(blacklist[i]);\n      if (index > -1) whitelist.splice(index, 1);\n    }\n\n    return whitelist.join('|');\n  },\n\n  /**\r\n   * @description Suneditor's Default button list\r\n   * @param {Object} options options\r\n   * @private\r\n   */\n  _defaultButtons: function _defaultButtons(options) {\n    var icons = options.icons;\n    var lang = options.lang;\n    var cmd = util.isOSX_IOS ? '⌘' : 'CTRL';\n    var addShift = util.isOSX_IOS ? '⇧' : '+SHIFT';\n    var shortcutsDisable = !options.shortcutsHint ? ['bold', 'strike', 'underline', 'italic', 'undo', 'indent', 'save'] : options.shortcutsDisable;\n    var indentKey = options.rtl ? ['[', ']'] : [']', '['];\n    var indentIcon = options.rtl ? [icons.outdent, icons.indent] : [icons.indent, icons.outdent];\n    return {\n      /** default command */\n      bold: ['', lang.toolbar.bold + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('bold') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">B</span>') + '</span>', 'bold', '', icons.bold],\n      underline: ['', lang.toolbar.underline + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('underline') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">U</span>') + '</span>', 'underline', '', icons.underline],\n      italic: ['', lang.toolbar.italic + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('italic') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">I</span>') + '</span>', 'italic', '', icons.italic],\n      strike: ['', lang.toolbar.strike + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('strike') > -1 ? '' : cmd + addShift + '+<span class=\"se-shortcut-key\">S</span>') + '</span>', 'strike', '', icons.strike],\n      subscript: ['', lang.toolbar.subscript, 'SUB', '', icons.subscript],\n      superscript: ['', lang.toolbar.superscript, 'SUP', '', icons.superscript],\n      removeFormat: ['', lang.toolbar.removeFormat, 'removeFormat', '', icons.erase],\n      indent: ['', lang.toolbar.indent + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('indent') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">' + indentKey[0] + '</span>') + '</span>', 'indent', '', indentIcon[0]],\n      outdent: ['', lang.toolbar.outdent + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('indent') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">' + indentKey[1] + '</span>') + '</span>', 'outdent', '', indentIcon[1]],\n      fullScreen: ['se-code-view-enabled se-resizing-enabled', lang.toolbar.fullScreen, 'fullScreen', '', icons.expansion],\n      showBlocks: ['', lang.toolbar.showBlocks, 'showBlocks', '', icons.show_blocks],\n      codeView: ['se-code-view-enabled se-resizing-enabled', lang.toolbar.codeView, 'codeView', '', icons.code_view],\n      undo: ['', lang.toolbar.undo + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('undo') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">Z</span>') + '</span>', 'undo', '', icons.undo],\n      redo: ['', lang.toolbar.redo + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('undo') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">Y</span> / ' + cmd + addShift + '+<span class=\"se-shortcut-key\">Z</span>') + '</span>', 'redo', '', icons.redo],\n      preview: ['se-resizing-enabled', lang.toolbar.preview, 'preview', '', icons.preview],\n      print: ['se-resizing-enabled', lang.toolbar.print, 'print', '', icons.print],\n      dir: ['', lang.toolbar[options.rtl ? 'dir_ltr' : 'dir_rtl'], 'dir', '', icons[options.rtl ? 'dir_ltr' : 'dir_rtl']],\n      dir_ltr: ['', lang.toolbar.dir_ltr, 'dir_ltr', '', icons.dir_ltr],\n      dir_rtl: ['', lang.toolbar.dir_rtl, 'dir_rtl', '', icons.dir_rtl],\n      save: ['se-resizing-enabled', lang.toolbar.save + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('save') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">S</span>') + '</span>', 'save', '', icons.save],\n\n      /** plugins - command */\n      blockquote: ['', lang.toolbar.tag_blockquote, 'blockquote', 'command', icons.blockquote],\n\n      /** plugins - submenu */\n      font: ['se-btn-select se-btn-tool-font', lang.toolbar.font, 'font', 'submenu', '<span class=\"txt\">' + lang.toolbar.font + '</span>' + icons.arrow_down],\n      formatBlock: ['se-btn-select se-btn-tool-format', lang.toolbar.formats, 'formatBlock', 'submenu', '<span class=\"txt\">' + lang.toolbar.formats + '</span>' + icons.arrow_down],\n      fontSize: ['se-btn-select se-btn-tool-size', lang.toolbar.fontSize, 'fontSize', 'submenu', '<span class=\"txt\">' + lang.toolbar.fontSize + '</span>' + icons.arrow_down],\n      fontColor: ['', lang.toolbar.fontColor, 'fontColor', 'submenu', icons.font_color],\n      hiliteColor: ['', lang.toolbar.hiliteColor, 'hiliteColor', 'submenu', icons.highlight_color],\n      align: ['se-btn-align', lang.toolbar.align, 'align', 'submenu', options.rtl ? icons.align_right : icons.align_left],\n      list: ['', lang.toolbar.list, 'list', 'submenu', icons.list_number],\n      horizontalRule: ['btn_line', lang.toolbar.horizontalRule, 'horizontalRule', 'submenu', icons.horizontal_rule],\n      table: ['', lang.toolbar.table, 'table', 'submenu', icons.table],\n      lineHeight: ['', lang.toolbar.lineHeight, 'lineHeight', 'submenu', icons.line_height],\n      template: ['', lang.toolbar.template, 'template', 'submenu', icons.template],\n      paragraphStyle: ['', lang.toolbar.paragraphStyle, 'paragraphStyle', 'submenu', icons.paragraph_style],\n      textStyle: ['', lang.toolbar.textStyle, 'textStyle', 'submenu', icons.text_style],\n\n      /** plugins - dialog */\n      link: ['', lang.toolbar.link, 'link', 'dialog', icons.link],\n      image: ['', lang.toolbar.image, 'image', 'dialog', icons.image],\n      video: ['', lang.toolbar.video, 'video', 'dialog', icons.video],\n      audio: ['', lang.toolbar.audio, 'audio', 'dialog', icons.audio],\n      math: ['', lang.toolbar.math, 'math', 'dialog', icons.math],\n\n      /** plugins - fileBrowser */\n      imageGallery: ['', lang.toolbar.imageGallery, 'imageGallery', 'fileBrowser', icons.image_gallery]\n    };\n  },\n\n  /**\r\n   * @description Create a group div containing each module\r\n   * @returns {Object}\r\n   * @private\r\n   */\n  _createModuleGroup: function _createModuleGroup() {\n    var oDiv = util.createElement('DIV');\n    oDiv.className = 'se-btn-module se-btn-module-border';\n    var oUl = util.createElement('UL');\n    oUl.className = 'se-menu-list';\n    oDiv.appendChild(oUl);\n    return {\n      'div': oDiv,\n      'ul': oUl\n    };\n  },\n\n  /**\r\n   * @description Create a button element\r\n   * @param {string} buttonClass className in button\r\n   * @param {string} title Title in button\r\n   * @param {string} dataCommand The data-command property of the button\r\n   * @param {string} dataDisplay The data-display property of the button ('dialog', 'submenu', 'command')\r\n   * @param {string} innerHTML Html in button\r\n   * @param {string} _disabled Button disabled\r\n   * @param {Object} _icons Icons\r\n   * @returns {Object}\r\n   * @private\r\n   */\n  _createButton: function _createButton(buttonClass, title, dataCommand, dataDisplay, innerHTML, _disabled, _icons) {\n    var oLi = util.createElement('LI');\n    var oButton = util.createElement('BUTTON');\n    var label = title || dataCommand;\n    oButton.setAttribute('type', 'button');\n    oButton.setAttribute('class', 'se-btn' + (buttonClass ? ' ' + buttonClass : '') + ' se-tooltip');\n    oButton.setAttribute('data-command', dataCommand);\n    oButton.setAttribute('data-display', dataDisplay);\n    oButton.setAttribute('aria-label', label.replace(/<span .+<\\/span>/, ''));\n    oButton.setAttribute('tabindex', '-1');\n    if (!innerHTML) innerHTML = '<span class=\"se-icon-text\">!</span>';\n\n    if (/^default\\./i.test(innerHTML)) {\n      innerHTML = _icons[innerHTML.replace(/^default\\./i, '')];\n    }\n\n    if (/^text\\./i.test(innerHTML)) {\n      innerHTML = innerHTML.replace(/^text\\./i, '');\n      oButton.className += ' se-btn-more-text';\n    }\n\n    innerHTML += '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + label + '</span></span>';\n    if (_disabled) oButton.setAttribute('disabled', true);\n    oButton.innerHTML = innerHTML;\n    oLi.appendChild(oButton);\n    return {\n      'li': oLi,\n      'button': oButton\n    };\n  },\n\n  /**\r\n   * @description Create editor HTML\r\n   * @param {Array} doc document object\r\n   * @param {Array} buttonList option.buttonList\r\n   * @param {Object|null} plugins Plugins\r\n   * @param {Array} options options\r\n   * @returns {Object} { element: (Element) Toolbar element, plugins: (Array|null) Plugins Array, pluginCallButtons: (Object), responsiveButtons: (Array) }\r\n   * @private\r\n   */\n  _createToolBar: function _createToolBar(doc, buttonList, plugins, options) {\n    var separator_vertical = doc.createElement('DIV');\n    separator_vertical.className = 'se-toolbar-separator-vertical';\n    var tool_bar = doc.createElement('DIV');\n    tool_bar.className = 'se-toolbar sun-editor-common';\n\n    var _buttonTray = doc.createElement('DIV');\n\n    _buttonTray.className = 'se-btn-tray';\n    tool_bar.appendChild(_buttonTray);\n    /** create button list */\n\n    buttonList = JSON.parse(JSON.stringify(buttonList));\n    var icons = options.icons;\n\n    var defaultButtonList = this._defaultButtons(options);\n\n    var pluginCallButtons = {};\n    var responsiveButtons = [];\n    var module = null;\n    var button = null;\n    var moduleElement = null;\n    var buttonElement = null;\n    var pluginName = '';\n    var vertical = false;\n    var moreLayer = util.createElement('DIV');\n    moreLayer.className = 'se-toolbar-more-layer';\n\n    buttonGroupLoop: for (var i = 0, more, moreContainer, moreCommand, buttonGroup, align; i < buttonList.length; i++) {\n      more = false;\n      align = '';\n      buttonGroup = buttonList[i];\n      moduleElement = this._createModuleGroup(); // button object\n\n      if (typeof buttonGroup === 'object') {\n        // buttons loop\n        for (var j = 0, moreButton; j < buttonGroup.length; j++) {\n          button = buttonGroup[j];\n          moreButton = false;\n\n          if (/^\\%\\d+/.test(button) && j === 0) {\n            buttonGroup[0] = button.replace(/[^\\d]/g, '');\n            responsiveButtons.push(buttonGroup);\n            buttonList.splice(i--, 1);\n            continue buttonGroupLoop;\n          }\n\n          if (typeof button === 'object') {\n            if (typeof button.add === 'function') {\n              pluginName = button.name;\n              module = defaultButtonList[pluginName];\n              plugins[pluginName] = button;\n            } else {\n              pluginName = button.name;\n              module = [button.buttonClass, button.title, button.name, button.dataDisplay, button.innerHTML, button._disabled];\n            }\n          } else {\n            // align\n            if (/^\\-/.test(button)) {\n              align = button.substr(1);\n              moduleElement.div.className += ' module-float-' + align;\n              continue;\n            } // rtl fix\n\n\n            if (/^\\#/.test(button)) {\n              var option = button.substr(1);\n              if (option === 'fix') moduleElement.ul.className += ' se-menu-dir-fix';\n              continue;\n            } // more button\n\n\n            if (/^\\:/.test(button)) {\n              moreButton = true;\n              var matched = button.match(/^\\:([^\\-]+)\\-([^\\-]+)\\-([^\\-]+)/);\n              moreCommand = '__se__' + matched[1].trim();\n              var title = matched[2].trim();\n              var innerHTML = matched[3].trim();\n              module = ['se-btn-more', title, moreCommand, 'MORE', innerHTML];\n            } // buttons\n            else {\n              module = defaultButtonList[button];\n            }\n\n            pluginName = button;\n\n            if (!module) {\n              var custom = plugins[pluginName];\n              if (!custom) throw Error('[SUNEDITOR.create.toolbar.fail] The button name of a plugin that does not exist. [' + pluginName + ']');\n              module = [custom.buttonClass, custom.title, custom.name, custom.display, custom.innerHTML, custom._disabled];\n            }\n          }\n\n          buttonElement = this._createButton(module[0], module[1], module[2], module[3], module[4], module[5], icons);\n          (more ? moreContainer : moduleElement.ul).appendChild(buttonElement.li);\n\n          if (plugins[pluginName]) {\n            pluginCallButtons[pluginName] = buttonElement.button;\n          } // more button\n\n\n          if (moreButton) {\n            more = true;\n            moreContainer = util.createElement('DIV');\n            moreContainer.className = 'se-more-layer ' + moreCommand;\n            moreContainer.innerHTML = '<div class=\"se-more-form\"><ul class=\"se-menu-list\"' + (align ? ' style=\"float: ' + align + ';\"' : '') + '></ul></div>';\n            moreLayer.appendChild(moreContainer);\n            moreContainer = moreContainer.firstElementChild.firstElementChild;\n          }\n        }\n\n        if (vertical) {\n          var sv = separator_vertical.cloneNode(false);\n\n          _buttonTray.appendChild(sv);\n        }\n\n        _buttonTray.appendChild(moduleElement.div);\n\n        vertical = true;\n      }\n      /** line break  */\n      else if (/^\\/$/.test(buttonGroup)) {\n        var enterDiv = doc.createElement('DIV');\n        enterDiv.className = 'se-btn-module-enter';\n\n        _buttonTray.appendChild(enterDiv);\n\n        vertical = false;\n      }\n    }\n\n    switch (_buttonTray.children.length) {\n      case 0:\n        _buttonTray.style.display = 'none';\n        break;\n\n      case 1:\n        util.removeClass(_buttonTray.firstElementChild, 'se-btn-module-border');\n        break;\n\n      default:\n        if (options.rtl) {\n          var _sv = separator_vertical.cloneNode(false);\n\n          _sv.style.float = _buttonTray.lastElementChild.style.float;\n\n          _buttonTray.appendChild(_sv);\n        }\n\n    }\n\n    if (responsiveButtons.length > 0) responsiveButtons.unshift(buttonList);\n    if (moreLayer.children.length > 0) _buttonTray.appendChild(moreLayer); // menu tray\n\n    var _menuTray = doc.createElement('DIV');\n\n    _menuTray.className = 'se-menu-tray';\n    tool_bar.appendChild(_menuTray); // cover\n\n    var tool_cover = doc.createElement('DIV');\n    tool_cover.className = 'se-toolbar-cover';\n    tool_bar.appendChild(tool_cover);\n    if (options.hideToolbar) tool_bar.style.display = 'none';\n    return {\n      'element': tool_bar,\n      'plugins': plugins,\n      'pluginCallButtons': pluginCallButtons,\n      'responsiveButtons': responsiveButtons,\n      '_menuTray': _menuTray,\n      '_buttonTray': _buttonTray\n    };\n  }\n};","map":{"version":3,"names":["_icons","_defaultLang","util","init","element","options","doc","document","_initOptions","top_div","createElement","className","rtl","id","relative","tool_bar","_createToolBar","buttonList","plugins","toolbarShadow","cloneNode","style","visibility","pluginCallButtons","math","_checkKatexMath","katex","arrow","sticky_dummy","editor_div","initElements","_initElements","bottomBar","wysiwyg_div","wysiwygFrame","placeholder_span","placeholder","textarea","codeView","resizing_bar","resizingBar","navigation","char_wrapper","charWrapper","char_counter","charCounter","loading_box","innerHTML","line_breaker","icons","line_break","line_breaker_t","line_breaker_b","resize_back","toolbarContainer","appendChild","resizingBarContainer","_checkCodeMirror","constructed","_top","_relative","_toolBar","_toolbarShadow","_menuTray","_editorArea","_wysiwygArea","_codeArea","_placeholder","_resizingBar","_navigation","_charWrapper","_charCounter","_loading","_lineBreaker","_lineBreaker_t","_lineBreaker_b","_resizeBack","_stickyDummy","_arrow","_responsiveButtons","responsiveButtons","codeMirror","cmOptions","mode","htmlMode","lineNumbers","lineWrapping","reduce","option","key","hasOwn","height","viewportMargin","Infinity","cm","src","fromTextArea","display","wrapper","cssText","codeMirrorEditor","Error","katexOptions","throwOnError","_setOptions","mergeOptions","context","originOptions","originElement","el","editorArea","isNewToolbarContainer","isNewToolbar","lang","toolbar","parentElement","removeChild","replaceChild","topArea","code","removeItem","addClass","removeClass","callButtons","topDiv","toolBar","toolBarArrow","_editorStyles","top","test","width","toolbarWidth","wysiwygDiv","iframe","setAttribute","iframeAttributes","_editableClass","frame","editor","allowFullscreen","frameBorder","overflow","charCounterLabel","charLabel","textContent","maxCharCount","char_max","innerText","_plugins","pluginsValues","length","Object","keys","map","name","i","len","p","default","value","historyStackDelayTime","frameAttrbutes","defaultTag","textTags","bold","underline","italic","strike","sub","sup","_default","_new","_textTagsMap","toLowerCase","_defaultCommand","subscript","superscript","whitelist","tagsBlacklist","_defaultTagsWhitelist","_editorTagsWhitelist","addTagsWhitelist","_setWhitelist","pasteTagsBlacklist","pasteTagsWhitelist","attributesWhitelist","attributesBlacklist","lineAttrReset","RegExp","_printClass","isNumber","querySelector","stickyToolbar","undefined","getNumber","hideToolbar","fullScreenOffset","fullPage","iframeCSSFileName","previewTemplate","printTemplate","mathFontSize","text","position","popupDisplay","showPathLabel","resizeEnable","charCounterType","trim","clientWidth","minWidth","maxWidth","clientHeight","minHeight","maxHeight","defaultStyle","font","fontSize","formats","colorList","lineHeights","paragraphStyles","textStyles","fontSizeUnit","alignItems","imageResizing","imageHeightShow","imageAlignShow","imageWidth","imageHeight","imageSizeOnlyPercentage","_imageSizeUnit","imageRotation","imageFileInput","imageUrlInput","imageUploadHeader","imageUploadUrl","imageUploadSizeLimit","imageMultipleFile","imageAccept","imageGalleryUrl","imageGalleryHeader","videoResizing","videoHeightShow","videoAlignShow","videoRatioShow","videoWidth","videoHeight","videoSizeOnlyPercentage","_videoSizeUnit","videoRotation","videoRatio","videoRatioList","youtubeQuery","replace","videoFileInput","videoUrlInput","videoUploadHeader","videoUploadUrl","videoUploadSizeLimit","videoMultipleFile","videoTagAttrs","videoIframeAttrs","videoAccept","audioWidth","audioHeight","audioFileInput","audioUrlInput","audioUploadHeader","audioUploadUrl","audioUploadSizeLimit","audioMultipleFile","audioTagAttrs","audioAccept","tableCellControllerPosition","linkTargetNewWindow","linkProtocol","linkRel","Array","isArray","linkRelDefault","tabDisable","shortcutsDisable","shortcutsHint","callBackSave","templates","mediaAutoSelect","reverse","__listCommonStyle","_setDefaultOptionStyle","blacklist","split","index","indexOf","splice","join","_defaultButtons","cmd","isOSX_IOS","addShift","indentKey","indentIcon","outdent","indent","removeFormat","erase","fullScreen","expansion","showBlocks","show_blocks","code_view","undo","redo","preview","print","dir","dir_ltr","dir_rtl","save","blockquote","tag_blockquote","arrow_down","formatBlock","fontColor","font_color","hiliteColor","highlight_color","align","align_right","align_left","list","list_number","horizontalRule","horizontal_rule","table","lineHeight","line_height","template","paragraphStyle","paragraph_style","textStyle","text_style","link","image","video","audio","imageGallery","image_gallery","_createModuleGroup","oDiv","oUl","_createButton","buttonClass","title","dataCommand","dataDisplay","_disabled","oLi","oButton","label","separator_vertical","_buttonTray","JSON","parse","stringify","defaultButtonList","module","button","moduleElement","buttonElement","pluginName","vertical","moreLayer","buttonGroupLoop","more","moreContainer","moreCommand","buttonGroup","j","moreButton","push","add","substr","div","ul","matched","match","custom","li","firstElementChild","sv","enterDiv","children","float","lastElementChild","unshift","tool_cover"],"sources":["/Users/jirayuyungmeesuk/Desktop/ v2/client/node_modules/suneditor/src/lib/constructor.js"],"sourcesContent":["/*\r\n * wysiwyg web editor\r\n *\r\n * suneditor.js\r\n * Copyright 2017 JiHong Lee.\r\n * MIT license.\r\n */\r\n'use strict';\r\n\r\nimport _icons from '../assets/defaultIcons';\r\nimport _defaultLang from '../lang/en';\r\nimport util from './util';\r\n\r\nexport default {\r\n    /**\r\n     * @description document create\r\n     * @param {Element} element Textarea\r\n     * @param {Object} options Options\r\n     * @returns {Object}\r\n     */\r\n    init: function (element, options) {\r\n        if (typeof options !== 'object') options = {};\r\n\r\n        const doc = document;\r\n\r\n        /** --- init options --- */\r\n        this._initOptions(element, options);\r\n    \r\n        // suneditor div\r\n        const top_div = doc.createElement('DIV');\r\n        top_div.className = 'sun-editor' + (options.rtl ? ' se-rtl' : '');\r\n        if (element.id) top_div.id = 'suneditor_' + element.id;\r\n    \r\n        // relative div\r\n        const relative = doc.createElement('DIV');\r\n        relative.className = 'se-container';\r\n    \r\n        // toolbar\r\n        const tool_bar = this._createToolBar(doc, options.buttonList, options.plugins, options);\r\n        const toolbarShadow = tool_bar.element.cloneNode(false);\r\n        toolbarShadow.className += ' se-toolbar-shadow';\r\n        tool_bar.element.style.visibility = 'hidden';\r\n        if (tool_bar.pluginCallButtons.math) this._checkKatexMath(options.katex);\r\n        const arrow = doc.createElement('DIV');\r\n        arrow.className = 'se-arrow';\r\n\r\n        // sticky toolbar dummy\r\n        const sticky_dummy = doc.createElement('DIV');\r\n        sticky_dummy.className = 'se-toolbar-sticky-dummy';\r\n    \r\n        // inner editor div\r\n        const editor_div = doc.createElement('DIV');\r\n        editor_div.className = 'se-wrapper';\r\n\r\n        /** --- init elements and create bottom bar --- */\r\n        const initElements = this._initElements(options, top_div, tool_bar.element, arrow);\r\n\r\n        const bottomBar = initElements.bottomBar;\r\n        const wysiwyg_div = initElements.wysiwygFrame;\r\n        const placeholder_span = initElements.placeholder;\r\n        let textarea = initElements.codeView;\r\n\r\n        // resizing bar\r\n        const resizing_bar = bottomBar.resizingBar;\r\n        const navigation = bottomBar.navigation;\r\n        const char_wrapper = bottomBar.charWrapper;\r\n        const char_counter = bottomBar.charCounter;\r\n    \r\n        // loading box\r\n        const loading_box = doc.createElement('DIV');\r\n        loading_box.className = 'se-loading-box sun-editor-common';\r\n        loading_box.innerHTML = '<div class=\"se-loading-effect\"></div>';\r\n\r\n        // enter line\r\n        const line_breaker = doc.createElement('DIV');\r\n        line_breaker.className = 'se-line-breaker';\r\n        line_breaker.innerHTML = '<button class=\"se-btn\">' + options.icons.line_break + '</button>';\r\n        const line_breaker_t = doc.createElement('DIV');\r\n        line_breaker_t.className += 'se-line-breaker-component';\r\n        const line_breaker_b = line_breaker_t.cloneNode(true);\r\n        line_breaker_t.innerHTML = line_breaker_b.innerHTML = options.icons.line_break;\r\n    \r\n        // resize operation background\r\n        const resize_back = doc.createElement('DIV');\r\n        resize_back.className = 'se-resizing-back';\r\n\r\n        // toolbar container\r\n        const toolbarContainer = options.toolbarContainer;\r\n        if (toolbarContainer) {\r\n            toolbarContainer.appendChild(tool_bar.element);\r\n            toolbarContainer.appendChild(toolbarShadow);\r\n        }\r\n\r\n        // resizingbar\r\n        const resizingBarContainer = options.resizingBarContainer;\r\n        if (resizing_bar && resizingBarContainer) resizingBarContainer.appendChild(resizing_bar);\r\n    \r\n        /** append html */\r\n        editor_div.appendChild(textarea);\r\n        if (placeholder_span) editor_div.appendChild(placeholder_span);\r\n        if (!toolbarContainer) {\r\n            relative.appendChild(tool_bar.element);\r\n            relative.appendChild(toolbarShadow);\r\n        }\r\n        relative.appendChild(sticky_dummy);\r\n        relative.appendChild(editor_div);\r\n        relative.appendChild(resize_back);\r\n        relative.appendChild(loading_box);\r\n        relative.appendChild(line_breaker);\r\n        relative.appendChild(line_breaker_t);\r\n        relative.appendChild(line_breaker_b);\r\n        if (resizing_bar && !resizingBarContainer) relative.appendChild(resizing_bar);\r\n        top_div.appendChild(relative);\r\n\r\n        textarea = this._checkCodeMirror(options, textarea);\r\n    \r\n        return {\r\n            constructed: {\r\n                _top: top_div,\r\n                _relative: relative,\r\n                _toolBar: tool_bar.element,\r\n                _toolbarShadow: toolbarShadow,\r\n                _menuTray: tool_bar._menuTray,\r\n                _editorArea: editor_div,\r\n                _wysiwygArea: wysiwyg_div,\r\n                _codeArea: textarea,\r\n                _placeholder: placeholder_span,\r\n                _resizingBar: resizing_bar,\r\n                _navigation: navigation,\r\n                _charWrapper: char_wrapper,\r\n                _charCounter: char_counter,\r\n                _loading: loading_box,\r\n                _lineBreaker: line_breaker,\r\n                _lineBreaker_t: line_breaker_t,\r\n                _lineBreaker_b: line_breaker_b,\r\n                _resizeBack: resize_back,\r\n                _stickyDummy: sticky_dummy,\r\n                _arrow: arrow\r\n            },\r\n            options: options,\r\n            plugins: tool_bar.plugins,\r\n            pluginCallButtons: tool_bar.pluginCallButtons,\r\n            _responsiveButtons: tool_bar.responsiveButtons\r\n        };\r\n    },\r\n\r\n    /**\r\n     * @description Check the CodeMirror option to apply the CodeMirror and return the CodeMirror element.\r\n     * @param {Object} options options\r\n     * @param {Element} textarea textarea element\r\n     * @private\r\n     */\r\n    _checkCodeMirror: function (options, textarea) {\r\n        if (options.codeMirror) {\r\n            const cmOptions = [{\r\n                mode: 'htmlmixed',\r\n                htmlMode: true,\r\n                lineNumbers: true,\r\n                lineWrapping: true\r\n            }, (options.codeMirror.options || {})].reduce(function (init, option) {\r\n                for (let key in option) {\r\n                    if (util.hasOwn(option, key)) init[key] = option[key];\r\n                }\r\n                return init;\r\n            }, {});\r\n\r\n            if (options.height === 'auto') {\r\n                cmOptions.viewportMargin = Infinity;\r\n                cmOptions.height = 'auto';\r\n            }\r\n            \r\n            const cm = options.codeMirror.src.fromTextArea(textarea, cmOptions);\r\n            cm.display.wrapper.style.cssText = textarea.style.cssText;\r\n            \r\n            options.codeMirrorEditor = cm;\r\n            textarea = cm.display.wrapper;\r\n            textarea.className += ' se-wrapper-code-mirror';\r\n        }\r\n\r\n        return textarea;\r\n    },\r\n\r\n    /**\r\n     * @description Check for a katex object.\r\n     * @param {Object} katex katex object\r\n     * @private\r\n     */\r\n    _checkKatexMath: function (katex) {\r\n        if (!katex) throw Error('[SUNEDITOR.create.fail] To use the math button you need to add a \"katex\" object to the options.');\r\n\r\n        const katexOptions = [{\r\n            throwOnError: false,\r\n        }, (katex.options || {})].reduce(function (init, option) {\r\n            for (let key in option) {\r\n                if (util.hasOwn(option, key)) init[key] = option[key];\r\n            }\r\n            return init;\r\n        }, {});\r\n\r\n        katex.options = katexOptions;\r\n    },\r\n\r\n    /**\r\n     * @description Add or reset options\r\n     * @param {Object} mergeOptions New options property\r\n     * @param {Object} context Context object of core\r\n     * @param {Object} originOptions Origin options\r\n     * @returns {Object} pluginCallButtons\r\n     * @private\r\n     */\r\n    _setOptions: function (mergeOptions, context, originOptions) {\r\n        this._initOptions(context.element.originElement, mergeOptions);\r\n\r\n        const el = context.element;\r\n        const relative = el.relative;\r\n        const editorArea = el.editorArea;\r\n        const isNewToolbarContainer = mergeOptions.toolbarContainer && mergeOptions.toolbarContainer !== originOptions.toolbarContainer;\r\n        const isNewToolbar = mergeOptions.lang !== originOptions.lang || mergeOptions.buttonList !== originOptions.buttonList || mergeOptions.mode !== originOptions.mode || isNewToolbarContainer;\r\n\r\n        const tool_bar = this._createToolBar(document, (isNewToolbar ? mergeOptions.buttonList : originOptions.buttonList), mergeOptions.plugins, mergeOptions);\r\n        if (tool_bar.pluginCallButtons.math) this._checkKatexMath(mergeOptions.katex);\r\n        const arrow = document.createElement('DIV');\r\n        arrow.className = 'se-arrow';\r\n\r\n        if (isNewToolbar) {\r\n            tool_bar.element.style.visibility = 'hidden';\r\n            // toolbar container\r\n            if (isNewToolbarContainer) {\r\n                mergeOptions.toolbarContainer.appendChild(tool_bar.element);\r\n                el.toolbar.parentElement.removeChild(el.toolbar);\r\n            } else {\r\n                el.toolbar.parentElement.replaceChild(tool_bar.element, el.toolbar);\r\n            }\r\n\r\n            el.toolbar = tool_bar.element;\r\n            el._menuTray = tool_bar._menuTray;\r\n            el._arrow = arrow;\r\n        }\r\n        \r\n        const initElements = this._initElements(mergeOptions, el.topArea, (isNewToolbar ? tool_bar.element : el.toolbar), arrow);\r\n\r\n        const bottomBar = initElements.bottomBar;\r\n        const wysiwygFrame = initElements.wysiwygFrame;\r\n        const placeholder_span = initElements.placeholder;\r\n        let code = initElements.codeView;\r\n\r\n        if (el.resizingBar) util.removeItem(el.resizingBar);\r\n        if (bottomBar.resizingBar) {\r\n            if (mergeOptions.resizingBarContainer && mergeOptions.resizingBarContainer !== originOptions.resizingBarContainer) {\r\n                mergeOptions.resizingBarContainer.appendChild(bottomBar.resizingBar);\r\n            } else {\r\n                relative.appendChild(bottomBar.resizingBar);\r\n            }\r\n        }\r\n\r\n        editorArea.innerHTML = '';\r\n        editorArea.appendChild(code);\r\n        if (placeholder_span) editorArea.appendChild(placeholder_span);\r\n\r\n        code = this._checkCodeMirror(mergeOptions, code);\r\n        \r\n        el.resizingBar = bottomBar.resizingBar;\r\n        el.navigation = bottomBar.navigation;\r\n        el.charWrapper = bottomBar.charWrapper;\r\n        el.charCounter = bottomBar.charCounter;\r\n        el.wysiwygFrame = wysiwygFrame;\r\n        el.code = code;\r\n        el.placeholder = placeholder_span;\r\n\r\n        if (mergeOptions.rtl) util.addClass(el.topArea, 'se-rtl');\r\n        else util.removeClass(el.topArea, 'se-rtl');\r\n\r\n        return {\r\n            callButtons: tool_bar.pluginCallButtons,\r\n            plugins: tool_bar.plugins,\r\n            toolbar: tool_bar\r\n        };\r\n    },\r\n\r\n    /**\r\n     * @description Initialize property of suneditor elements\r\n     * @param {Object} options Options\r\n     * @param {Element} topDiv Suneditor top div\r\n     * @param {Element} toolBar Tool bar\r\n     * @param {Element} toolBarArrow Tool bar arrow (balloon editor)\r\n     * @returns {Object} Bottom bar elements (resizingBar, navigation, charWrapper, charCounter)\r\n     * @private\r\n     */\r\n    _initElements: function (options, topDiv, toolBar, toolBarArrow) {\r\n        /** top div */\r\n        topDiv.style.cssText = options._editorStyles.top;\r\n\r\n        /** toolbar */\r\n        if (/inline/i.test(options.mode)) {\r\n            toolBar.className += ' se-toolbar-inline';\r\n            toolBar.style.width = options.toolbarWidth;\r\n        } else if (/balloon/i.test(options.mode)) {\r\n            toolBar.className += ' se-toolbar-balloon';\r\n            toolBar.style.width = options.toolbarWidth;\r\n            toolBar.appendChild(toolBarArrow);\r\n        }\r\n\r\n        /** editor */\r\n        // wysiwyg div or iframe\r\n        const wysiwygDiv = document.createElement(!options.iframe ? 'DIV' : 'IFRAME');\r\n        wysiwygDiv.className = 'se-wrapper-inner se-wrapper-wysiwyg';\r\n        \r\n        if (!options.iframe) {\r\n            wysiwygDiv.setAttribute('contenteditable', true);\r\n            wysiwygDiv.setAttribute('scrolling', 'auto');\r\n            for (let key in options.iframeAttributes) {\r\n                wysiwygDiv.setAttribute(key, options.iframeAttributes[key]);\r\n            }\r\n            wysiwygDiv.className += ' ' + options._editableClass;\r\n            wysiwygDiv.style.cssText = options._editorStyles.frame + options._editorStyles.editor;\r\n            wysiwygDiv.className += options.className;\r\n        } else {\r\n            wysiwygDiv.allowFullscreen = true;\r\n            wysiwygDiv.frameBorder = 0;\r\n            wysiwygDiv.style.cssText = options._editorStyles.frame;\r\n            wysiwygDiv.className += options.className;\r\n        }\r\n\r\n        // textarea for code view\r\n        const textarea = document.createElement('TEXTAREA');\r\n        textarea.className = 'se-wrapper-inner se-wrapper-code' + options.className;\r\n        textarea.style.cssText = options._editorStyles.frame;\r\n        textarea.style.display = 'none';\r\n        if (options.height === 'auto') textarea.style.overflow = 'hidden';\r\n\r\n        /** resize bar */\r\n        let resizingBar = null;\r\n        let navigation = null;\r\n        let charWrapper = null;\r\n        let charCounter = null;\r\n        if (options.resizingBar) {\r\n            resizingBar = document.createElement('DIV');\r\n            resizingBar.className = 'se-resizing-bar sun-editor-common';\r\n\r\n            /** navigation */\r\n            navigation = document.createElement('DIV');\r\n            navigation.className = 'se-navigation sun-editor-common';\r\n            resizingBar.appendChild(navigation);\r\n\r\n            /** char counter */\r\n            if (options.charCounter) {\r\n                charWrapper = document.createElement('DIV');\r\n                charWrapper.className = 'se-char-counter-wrapper';\r\n\r\n                if (options.charCounterLabel) {\r\n                    const charLabel = document.createElement('SPAN');\r\n                    charLabel.className = 'se-char-label';\r\n                    charLabel.textContent = options.charCounterLabel;\r\n                    charWrapper.appendChild(charLabel);\r\n                }\r\n    \r\n                charCounter = document.createElement('SPAN');\r\n                charCounter.className = 'se-char-counter';\r\n                charCounter.textContent = '0';\r\n                charWrapper.appendChild(charCounter);\r\n    \r\n                if (options.maxCharCount > 0) {\r\n                    const char_max = document.createElement('SPAN');\r\n                    char_max.textContent = ' / ' + options.maxCharCount;\r\n                    charWrapper.appendChild(char_max);\r\n                }\r\n\r\n                resizingBar.appendChild(charWrapper);\r\n            }\r\n        }\r\n        \r\n        let placeholder = null;\r\n        if (options.placeholder) {\r\n            placeholder = document.createElement('SPAN');\r\n            placeholder.className = 'se-placeholder';\r\n            placeholder.innerText = options.placeholder;\r\n        }\r\n\r\n        return {\r\n            bottomBar: {\r\n                resizingBar: resizingBar,\r\n                navigation: navigation,\r\n                charWrapper: charWrapper,\r\n                charCounter: charCounter\r\n            },\r\n            wysiwygFrame: wysiwygDiv,\r\n            codeView: textarea,\r\n            placeholder: placeholder\r\n        };\r\n    },\r\n\r\n    /**\r\n     * @description Initialize options\r\n     * @param {Element} element Options object\r\n     * @param {Object} options Options object\r\n     * @private\r\n     */\r\n    _initOptions: function (element, options) {\r\n        const plugins = {};\r\n        if (options.plugins) {\r\n            const _plugins = options.plugins;\r\n            const pluginsValues = _plugins.length ? _plugins : Object.keys(_plugins).map(function(name) { return _plugins[name]; });\r\n            for (let i = 0, len = pluginsValues.length, p; i < len; i++) {\r\n                p = pluginsValues[i].default || pluginsValues[i];\r\n                plugins[p.name] = p;\r\n            }\r\n        }\r\n        options.plugins = plugins;\r\n        /** Values */\r\n        options.lang = options.lang || _defaultLang;\r\n        options.value = typeof options.value === 'string' ? options.value : null;\r\n        options.historyStackDelayTime = typeof options.historyStackDelayTime === 'number' ? options.historyStackDelayTime : 400;\r\n        options.frameAttrbutes = options.frameAttrbutes || {};\r\n        // tag style\r\n        options.defaultTag = typeof options.defaultTag === 'string' && options.defaultTag.length > 0 ? options.defaultTag : 'p';\r\n        const textTags = options.textTags = [{bold: 'STRONG', underline: 'U', italic: 'EM', strike: 'DEL', sub: 'SUB', sup: 'SUP'}, (options.textTags || {})].reduce(function (_default, _new) {\r\n            for (let key in _new) {\r\n                _default[key] = _new[key];\r\n            }\r\n            return _default;\r\n        }, {});\r\n        options._textTagsMap = {\r\n            'strong': textTags.bold.toLowerCase(),\r\n            'b': textTags.bold.toLowerCase(),\r\n            'u': textTags.underline.toLowerCase(),\r\n            'ins': textTags.underline.toLowerCase(),\r\n            'em': textTags.italic.toLowerCase(),\r\n            'i': textTags.italic.toLowerCase(),\r\n            'del': textTags.strike.toLowerCase(),\r\n            'strike': textTags.strike.toLowerCase(),\r\n            's': textTags.strike.toLowerCase(),\r\n            'sub': textTags.sub.toLowerCase(),\r\n            'sup': textTags.sup.toLowerCase()\r\n        };\r\n        options._defaultCommand = {\r\n            bold: options.textTags.bold,\r\n            underline: options.textTags.underline,\r\n            italic: options.textTags.italic,\r\n            strike: options.textTags.strike,\r\n            subscript: options.textTags.sub,\r\n            superscript: options.textTags.sup\r\n        };\r\n        /** Whitelist, Blacklist */\r\n        const whitelist = 'br|p|div|pre|blockquote|h1|h2|h3|h4|h5|h6|ol|ul|li|hr|figure|figcaption|img|iframe|audio|video|source|table|thead|tbody|tr|th|td|a|b|strong|var|i|em|u|ins|s|span|strike|del|sub|sup|code|svg|path|details|summary';\r\n        // tags\r\n        options.tagsBlacklist = options.tagsBlacklist || '';\r\n        options._defaultTagsWhitelist = typeof options._defaultTagsWhitelist === 'string' ? options._defaultTagsWhitelist : whitelist;\r\n        options._editorTagsWhitelist = options.addTagsWhitelist === '*' ? '*' : this._setWhitelist(options._defaultTagsWhitelist + (typeof options.addTagsWhitelist === 'string' && options.addTagsWhitelist.length > 0 ? '|' + options.addTagsWhitelist : ''), options.tagsBlacklist);\r\n        // paste tags\r\n        options.pasteTagsBlacklist = options.tagsBlacklist + (options.tagsBlacklist && options.pasteTagsBlacklist ? ('|' + options.pasteTagsBlacklist) : (options.pasteTagsBlacklist || ''));\r\n        options.pasteTagsWhitelist = options.pasteTagsWhitelist === '*' ? '*' : this._setWhitelist(typeof options.pasteTagsWhitelist === 'string' ? options.pasteTagsWhitelist : options._editorTagsWhitelist, options.pasteTagsBlacklist);\r\n        // tag attributes\r\n        options.attributesWhitelist = (!options.attributesWhitelist || typeof options.attributesWhitelist !== 'object') ? null : options.attributesWhitelist;\r\n        options.attributesBlacklist = (!options.attributesBlacklist || typeof options.attributesBlacklist !== 'object') ? null : options.attributesBlacklist;\r\n        /** Layout */\r\n        options.mode = options.mode || 'classic'; // classic, inline, balloon, balloon-always\r\n        options.rtl = !!options.rtl;\r\n        options.lineAttrReset = typeof options.lineAttrReset === 'string' && options.lineAttrReset ? options.lineAttrReset === '*' ? '*' : new RegExp('^(' + options.lineAttrReset + ')$', 'i') : null;\r\n        options._editableClass = 'sun-editor-editable' + (options.rtl ? ' se-rtl' : '');\r\n        options._printClass = typeof options._printClass === 'string' ? options._printClass : null;\r\n        options.toolbarWidth = options.toolbarWidth ? (util.isNumber(options.toolbarWidth) ? options.toolbarWidth + 'px' : options.toolbarWidth) : 'auto';\r\n        options.toolbarContainer = typeof options.toolbarContainer === 'string' ? document.querySelector(options.toolbarContainer) : options.toolbarContainer;\r\n        options.stickyToolbar = (/balloon/i.test(options.mode) || !!options.toolbarContainer) ? -1 : options.stickyToolbar === undefined ? 0 : (/^\\d+/.test(options.stickyToolbar) ? util.getNumber(options.stickyToolbar, 0) : -1);\r\n        options.hideToolbar = !!options.hideToolbar;\r\n        options.fullScreenOffset = options.fullScreenOffset === undefined ? 0 : (/^\\d+/.test(options.fullScreenOffset) ? util.getNumber(options.fullScreenOffset, 0) : 0);\r\n        options.fullPage = !!options.fullPage;\r\n        options.iframe = options.fullPage || !!options.iframe;\r\n        options.iframeAttributes = options.iframeAttributes || {};\r\n        options.iframeCSSFileName = options.iframe ? typeof options.iframeCSSFileName === 'string' ? [options.iframeCSSFileName] : (options.iframeCSSFileName || ['suneditor']) : null;\r\n        options.previewTemplate = typeof options.previewTemplate === 'string' ? options.previewTemplate : null;\r\n        options.printTemplate = typeof options.printTemplate === 'string' ? options.printTemplate : null;\r\n        /** CodeMirror object */\r\n        options.codeMirror = options.codeMirror ? options.codeMirror.src ? options.codeMirror : {src: options.codeMirror} : null;\r\n        /** katex object (Math plugin) */\r\n        options.katex = options.katex ? options.katex.src ? options.katex : {src: options.katex} : null;\r\n        options.mathFontSize = !!options.mathFontSize ? options.mathFontSize : [\r\n            {text: '1', value: '1em'},\r\n            {text: '1.5', value: '1.5em'},\r\n            {text: '2', value: '2em'},\r\n            {text: '2.5', value: '2.5em'}\r\n        ];\r\n        /** Display */\r\n        options.position = typeof options.position === 'string' ? options.position : null;\r\n        options.display = options.display || (element.style.display === 'none' || !element.style.display ? 'block' : element.style.display);\r\n        options.popupDisplay = options.popupDisplay || 'full';\r\n        /** Bottom resizing bar */\r\n        options.resizingBar = options.resizingBar === undefined ? (/inline|balloon/i.test(options.mode) ? false : true) : options.resizingBar;\r\n        options.showPathLabel = !options.resizingBar ? false : typeof options.showPathLabel === 'boolean' ? options.showPathLabel : true;\r\n        options.resizeEnable = options.resizeEnable === undefined ? true : !!options.resizeEnable;\r\n        options.resizingBarContainer = typeof options.resizingBarContainer === 'string' ? document.querySelector(options.resizingBarContainer) : options.resizingBarContainer;\r\n        /** Character count */\r\n        options.charCounter = options.maxCharCount > 0 ? true : typeof options.charCounter === 'boolean' ? options.charCounter : false;\r\n        options.charCounterType = typeof options.charCounterType === 'string' ? options.charCounterType : 'char';\r\n        options.charCounterLabel = typeof options.charCounterLabel === 'string' ? options.charCounterLabel.trim() : null;\r\n        options.maxCharCount = util.isNumber(options.maxCharCount) && options.maxCharCount > -1 ? options.maxCharCount * 1 : null;\r\n        /** Width size */\r\n        options.width = options.width ? (util.isNumber(options.width) ? options.width + 'px' : options.width) : (element.clientWidth ? element.clientWidth + 'px' : '100%');\r\n        options.minWidth = (util.isNumber(options.minWidth) ? options.minWidth + 'px' : options.minWidth) || '';\r\n        options.maxWidth = (util.isNumber(options.maxWidth) ? options.maxWidth + 'px' : options.maxWidth) || '';\r\n        /** Height size */\r\n        options.height = options.height ? (util.isNumber(options.height) ? options.height + 'px' : options.height) : (element.clientHeight ? element.clientHeight + 'px' : 'auto');\r\n        options.minHeight = (util.isNumber(options.minHeight) ? options.minHeight + 'px' : options.minHeight) || '';\r\n        options.maxHeight = (util.isNumber(options.maxHeight) ? options.maxHeight + 'px' : options.maxHeight) || '';\r\n        /** Editing area */\r\n        options.className = (typeof options.className === 'string' && options.className.length > 0) ? ' ' + options.className : '';\r\n        options.defaultStyle = typeof options.defaultStyle === 'string' ? options.defaultStyle : '';\r\n        /** Defining menu items */\r\n        options.font = !options.font ? ['Arial', 'Comic Sans MS', 'Courier New', 'Impact', 'Georgia', 'tahoma', 'Trebuchet MS', 'Verdana'] : options.font;\r\n        options.fontSize = !options.fontSize ? null : options.fontSize;\r\n        options.formats = !options.formats ? null : options.formats;\r\n        options.colorList = !options.colorList ? null : options.colorList;\r\n        options.lineHeights = !options.lineHeights ? null : options.lineHeights;\r\n        options.paragraphStyles = !options.paragraphStyles ? null : options.paragraphStyles;\r\n        options.textStyles = !options.textStyles ? null : options.textStyles;\r\n        options.fontSizeUnit = typeof options.fontSizeUnit === 'string' ? (options.fontSizeUnit.trim().toLowerCase() || 'px') : 'px';\r\n        options.alignItems = typeof options.alignItems === 'object' ? options.alignItems : (options.rtl ? ['right', 'center', 'left', 'justify'] : ['left', 'center', 'right', 'justify']);\r\n        /** Image */\r\n        options.imageResizing = options.imageResizing === undefined ? true : options.imageResizing;\r\n        options.imageHeightShow = options.imageHeightShow === undefined ? true : !!options.imageHeightShow;\r\n        options.imageAlignShow = options.imageAlignShow === undefined ? true : !!options.imageAlignShow;\r\n        options.imageWidth = !options.imageWidth ? 'auto' : util.isNumber(options.imageWidth) ? options.imageWidth + 'px' : options.imageWidth;\r\n        options.imageHeight = !options.imageHeight ? 'auto' : util.isNumber(options.imageHeight) ? options.imageHeight + 'px' : options.imageHeight;\r\n        options.imageSizeOnlyPercentage = !!options.imageSizeOnlyPercentage;\r\n        options._imageSizeUnit = options.imageSizeOnlyPercentage ? '%' : 'px';\r\n        options.imageRotation = options.imageRotation !== undefined ? options.imageRotation : !(options.imageSizeOnlyPercentage || !options.imageHeightShow);\r\n        options.imageFileInput = options.imageFileInput === undefined ? true : options.imageFileInput;\r\n        options.imageUrlInput = (options.imageUrlInput === undefined || !options.imageFileInput) ? true : options.imageUrlInput;\r\n        options.imageUploadHeader = options.imageUploadHeader || null;\r\n        options.imageUploadUrl = typeof options.imageUploadUrl === 'string' ? options.imageUploadUrl : null;\r\n        options.imageUploadSizeLimit = /\\d+/.test(options.imageUploadSizeLimit) ? util.getNumber(options.imageUploadSizeLimit, 0) : null;\r\n        options.imageMultipleFile = !!options.imageMultipleFile;\r\n        options.imageAccept = (typeof options.imageAccept !== 'string' || options.imageAccept.trim() === \"*\") ? 'image/*' : options.imageAccept.trim() || 'image/*';\r\n        /** Image - image gallery */\r\n        options.imageGalleryUrl = typeof options.imageGalleryUrl === 'string' ? options.imageGalleryUrl : null;\r\n        options.imageGalleryHeader = options.imageGalleryHeader || null;\r\n        /** Video */\r\n        options.videoResizing = options.videoResizing === undefined ? true : options.videoResizing;\r\n        options.videoHeightShow = options.videoHeightShow === undefined ? true : !!options.videoHeightShow;\r\n        options.videoAlignShow = options.videoAlignShow === undefined ? true : !!options.videoAlignShow;\r\n        options.videoRatioShow = options.videoRatioShow === undefined ? true : !!options.videoRatioShow;\r\n        options.videoWidth = !options.videoWidth || !util.getNumber(options.videoWidth, 0) ? '' : util.isNumber(options.videoWidth) ? options.videoWidth + 'px' : options.videoWidth;\r\n        options.videoHeight = !options.videoHeight || !util.getNumber(options.videoHeight, 0) ? '' : util.isNumber(options.videoHeight) ? options.videoHeight + 'px' : options.videoHeight;\r\n        options.videoSizeOnlyPercentage = !!options.videoSizeOnlyPercentage;\r\n        options._videoSizeUnit = options.videoSizeOnlyPercentage ? '%' : 'px';\r\n        options.videoRotation = options.videoRotation !== undefined ? options.videoRotation : !(options.videoSizeOnlyPercentage || !options.videoHeightShow);\r\n        options.videoRatio = (util.getNumber(options.videoRatio, 4) || 0.5625);\r\n        options.videoRatioList = !options.videoRatioList ? null : options.videoRatioList;\r\n        options.youtubeQuery = (options.youtubeQuery || '').replace('?', '');\r\n        options.videoFileInput = !!options.videoFileInput;\r\n        options.videoUrlInput = (options.videoUrlInput === undefined || !options.videoFileInput) ? true : options.videoUrlInput;\r\n        options.videoUploadHeader = options.videoUploadHeader || null;\r\n        options.videoUploadUrl = typeof options.videoUploadUrl === 'string' ? options.videoUploadUrl : null;\r\n        options.videoUploadSizeLimit = /\\d+/.test(options.videoUploadSizeLimit) ? util.getNumber(options.videoUploadSizeLimit, 0) : null;\r\n        options.videoMultipleFile = !!options.videoMultipleFile;\r\n        options.videoTagAttrs = options.videoTagAttrs || null;\r\n        options.videoIframeAttrs = options.videoIframeAttrs || null;\r\n        options.videoAccept = (typeof options.videoAccept !== 'string' || options.videoAccept.trim() === \"*\") ? 'video/*' : options.videoAccept.trim() || 'video/*';\r\n        /** Audio */\r\n        options.audioWidth = !options.audioWidth ? '' : util.isNumber(options.audioWidth) ? options.audioWidth + 'px' : options.audioWidth;\r\n        options.audioHeight = !options.audioHeight ? '' : util.isNumber(options.audioHeight) ? options.audioHeight + 'px' : options.audioHeight;\r\n        options.audioFileInput = !!options.audioFileInput;\r\n        options.audioUrlInput = (options.audioUrlInput === undefined || !options.audioFileInput) ? true : options.audioUrlInput;\r\n        options.audioUploadHeader = options.audioUploadHeader || null;\r\n        options.audioUploadUrl = typeof options.audioUploadUrl === 'string' ? options.audioUploadUrl : null;\r\n        options.audioUploadSizeLimit = /\\d+/.test(options.audioUploadSizeLimit) ? util.getNumber(options.audioUploadSizeLimit, 0) : null;\r\n        options.audioMultipleFile = !!options.audioMultipleFile;\r\n        options.audioTagAttrs = options.audioTagAttrs || null;\r\n        options.audioAccept = (typeof options.audioAccept !== 'string' || options.audioAccept.trim() === \"*\") ? 'audio/*' : options.audioAccept.trim() || 'audio/*';\r\n        /** Table */\r\n        options.tableCellControllerPosition = typeof options.tableCellControllerPosition === 'string' ? options.tableCellControllerPosition.toLowerCase() : 'cell';\r\n        /** Link */\r\n        options.linkTargetNewWindow = !!options.linkTargetNewWindow;\r\n        options.linkProtocol = typeof options.linkProtocol === 'string' ? options.linkProtocol : null;\r\n        options.linkRel = Array.isArray(options.linkRel) ? options.linkRel : [];\r\n        options.linkRelDefault = options.linkRelDefault || {};\r\n        /** HR */\r\n        // options.hrItems = options.hrItems;\r\n        /** Key actions */\r\n        options.tabDisable = !!options.tabDisable;\r\n        options.shortcutsDisable = Array.isArray(options.shortcutsDisable) ? options.shortcutsDisable : [];\r\n        options.shortcutsHint = options.shortcutsHint === undefined ? true : !!options.shortcutsHint;\r\n        /** Defining save button */\r\n        options.callBackSave = !options.callBackSave ? null : options.callBackSave;\r\n        /** Templates Array */\r\n        options.templates = !options.templates ? null : options.templates;\r\n        /** ETC */\r\n        options.placeholder = typeof options.placeholder === 'string' ? options.placeholder : null;\r\n        options.mediaAutoSelect = options.mediaAutoSelect === undefined ? true : !!options.mediaAutoSelect;\r\n        /** Buttons */\r\n        options.buttonList = !!options.buttonList ? options.buttonList : [\r\n            ['undo', 'redo'],\r\n            ['bold', 'underline', 'italic', 'strike', 'subscript', 'superscript'],\r\n            ['removeFormat'],\r\n            ['outdent', 'indent'],\r\n            ['fullScreen', 'showBlocks', 'codeView'],\r\n            ['preview', 'print']\r\n        ];\r\n\r\n        /** RTL - buttons */\r\n        if (options.rtl) {\r\n            options.buttonList = options.buttonList.reverse();\r\n        }\r\n\r\n        /** --- Define icons --- */\r\n        // custom icons\r\n        options.icons = (!options.icons || typeof options.icons !== 'object') ? _icons : [_icons, options.icons].reduce(function (_default, _new) {\r\n            for (let key in _new) {\r\n                if (util.hasOwn(_new, key)) _default[key] = _new[key];\r\n            }\r\n            return _default;\r\n        }, {});\r\n        // rtl icons\r\n        options.icons = !options.rtl ? options.icons : [options.icons, options.icons.rtl].reduce(function (_default, _new) {\r\n            for (let key in _new) {\r\n                if (util.hasOwn(_new, key)) _default[key] = _new[key];\r\n            }\r\n            return _default;\r\n        }, {});\r\n\r\n        /** Private options */\r\n        // options.__defaultFontSize;\r\n        options.__listCommonStyle = options.__listCommonStyle || ['fontSize', 'color', 'fontFamily', 'fontWeight', 'fontStyle'];\r\n\r\n        /** _init options */\r\n        options._editorStyles = util._setDefaultOptionStyle(options, options.defaultStyle);\r\n    },\r\n\r\n    _setWhitelist: function (whitelist, blacklist) {\r\n        if (typeof blacklist !== 'string') return whitelist;\r\n        blacklist = blacklist.split('|');\r\n        whitelist = whitelist.split('|');\r\n        for (let i = 0, len = blacklist.length, index; i < len; i++) {\r\n            index = whitelist.indexOf(blacklist[i]);\r\n            if (index > -1) whitelist.splice(index, 1);\r\n        }\r\n        return whitelist.join('|');\r\n    },\r\n\r\n    /**\r\n     * @description Suneditor's Default button list\r\n     * @param {Object} options options\r\n     * @private\r\n     */\r\n    _defaultButtons: function (options) {\r\n        const icons = options.icons;\r\n        const lang = options.lang;\r\n        const cmd = util.isOSX_IOS ? '⌘' : 'CTRL';\r\n        const addShift = util.isOSX_IOS ? '⇧' : '+SHIFT';\r\n        const shortcutsDisable = !options.shortcutsHint ? ['bold', 'strike', 'underline', 'italic', 'undo', 'indent', 'save'] : options.shortcutsDisable;\r\n        const indentKey = options.rtl ? ['[',']'] : [']','['];\r\n        const indentIcon = options.rtl ? [icons.outdent, icons.indent] : [icons.indent, icons.outdent];\r\n\r\n        return {\r\n            /** default command */\r\n            bold: ['', lang.toolbar.bold + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('bold') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">B</span>') + '</span>', 'bold', '', icons.bold],\r\n            underline: ['', lang.toolbar.underline + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('underline') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">U</span>') + '</span>', 'underline', '', icons.underline],\r\n            italic: ['', lang.toolbar.italic + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('italic') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">I</span>') + '</span>', 'italic', '', icons.italic],\r\n            strike: ['', lang.toolbar.strike + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('strike') > -1 ? '' : cmd + addShift + '+<span class=\"se-shortcut-key\">S</span>') + '</span>', 'strike', '', icons.strike],\r\n            subscript: ['', lang.toolbar.subscript, 'SUB', '', icons.subscript],\r\n            superscript: ['', lang.toolbar.superscript, 'SUP', '', icons.superscript],\r\n            removeFormat: ['', lang.toolbar.removeFormat, 'removeFormat', '', icons.erase],\r\n            indent: ['', lang.toolbar.indent + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('indent') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">' + indentKey[0] + '</span>') + '</span>', 'indent', '', indentIcon[0]],\r\n            outdent: ['', lang.toolbar.outdent + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('indent') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">' + indentKey[1] + '</span>') + '</span>', 'outdent', '', indentIcon[1]],\r\n            fullScreen: ['se-code-view-enabled se-resizing-enabled', lang.toolbar.fullScreen, 'fullScreen', '', icons.expansion],\r\n            showBlocks: ['', lang.toolbar.showBlocks, 'showBlocks', '', icons.show_blocks],\r\n            codeView: ['se-code-view-enabled se-resizing-enabled', lang.toolbar.codeView, 'codeView', '', icons.code_view],\r\n            undo: ['', lang.toolbar.undo + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('undo') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">Z</span>') + '</span>', 'undo', '', icons.undo],\r\n            redo: ['', lang.toolbar.redo + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('undo') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">Y</span> / ' + cmd + addShift + '+<span class=\"se-shortcut-key\">Z</span>') + '</span>', 'redo', '', icons.redo],\r\n            preview: ['se-resizing-enabled', lang.toolbar.preview, 'preview', '', icons.preview],\r\n            print: ['se-resizing-enabled', lang.toolbar.print, 'print', '', icons.print],\r\n            dir: ['', lang.toolbar[options.rtl ? 'dir_ltr' : 'dir_rtl'], 'dir', '',  icons[options.rtl ? 'dir_ltr' : 'dir_rtl']],\r\n            dir_ltr: ['', lang.toolbar.dir_ltr, 'dir_ltr', '',  icons.dir_ltr],\r\n            dir_rtl: ['', lang.toolbar.dir_rtl, 'dir_rtl', '',  icons.dir_rtl],\r\n            save: ['se-resizing-enabled', lang.toolbar.save + '<span class=\"se-shortcut\">' + (shortcutsDisable.indexOf('save') > -1 ? '' : cmd + '+<span class=\"se-shortcut-key\">S</span>') + '</span>', 'save', '', icons.save],\r\n            /** plugins - command */\r\n            blockquote: ['', lang.toolbar.tag_blockquote, 'blockquote', 'command', icons.blockquote],\r\n            /** plugins - submenu */\r\n            font: ['se-btn-select se-btn-tool-font', lang.toolbar.font, 'font', 'submenu', '<span class=\"txt\">' + lang.toolbar.font + '</span>' + icons.arrow_down],\r\n            formatBlock: ['se-btn-select se-btn-tool-format', lang.toolbar.formats, 'formatBlock', 'submenu', '<span class=\"txt\">' + lang.toolbar.formats + '</span>' + icons.arrow_down],\r\n            fontSize: ['se-btn-select se-btn-tool-size', lang.toolbar.fontSize, 'fontSize', 'submenu', '<span class=\"txt\">' + lang.toolbar.fontSize + '</span>' + icons.arrow_down],\r\n            fontColor: ['', lang.toolbar.fontColor, 'fontColor', 'submenu', icons.font_color],\r\n            hiliteColor: ['', lang.toolbar.hiliteColor, 'hiliteColor', 'submenu', icons.highlight_color],\r\n            align: ['se-btn-align', lang.toolbar.align, 'align', 'submenu', (options.rtl ? icons.align_right : icons.align_left)],\r\n            list: ['', lang.toolbar.list, 'list', 'submenu', icons.list_number],\r\n            horizontalRule: ['btn_line', lang.toolbar.horizontalRule, 'horizontalRule', 'submenu', icons.horizontal_rule],\r\n            table: ['', lang.toolbar.table, 'table', 'submenu', icons.table],\r\n            lineHeight: ['', lang.toolbar.lineHeight, 'lineHeight', 'submenu', icons.line_height],\r\n            template: ['', lang.toolbar.template, 'template', 'submenu', icons.template],\r\n            paragraphStyle: ['', lang.toolbar.paragraphStyle, 'paragraphStyle', 'submenu', icons.paragraph_style],\r\n            textStyle: ['', lang.toolbar.textStyle, 'textStyle', 'submenu', icons.text_style],\r\n            /** plugins - dialog */\r\n            link: ['', lang.toolbar.link, 'link', 'dialog', icons.link],\r\n            image: ['', lang.toolbar.image, 'image', 'dialog', icons.image],\r\n            video: ['', lang.toolbar.video, 'video', 'dialog', icons.video],\r\n            audio: ['', lang.toolbar.audio, 'audio', 'dialog', icons.audio],\r\n            math: ['', lang.toolbar.math, 'math', 'dialog', icons.math],\r\n            /** plugins - fileBrowser */\r\n            imageGallery: ['', lang.toolbar.imageGallery, 'imageGallery', 'fileBrowser', icons.image_gallery]\r\n        };\r\n    },\r\n\r\n    /**\r\n     * @description Create a group div containing each module\r\n     * @returns {Object}\r\n     * @private\r\n     */\r\n    _createModuleGroup: function () {\r\n        const oDiv = util.createElement('DIV');\r\n        oDiv.className = 'se-btn-module se-btn-module-border';\r\n\r\n        const oUl = util.createElement('UL');\r\n        oUl.className = 'se-menu-list';\r\n        oDiv.appendChild(oUl);\r\n\r\n        return {\r\n            'div': oDiv,\r\n            'ul': oUl\r\n        };\r\n    },\r\n\r\n    /**\r\n     * @description Create a button element\r\n     * @param {string} buttonClass className in button\r\n     * @param {string} title Title in button\r\n     * @param {string} dataCommand The data-command property of the button\r\n     * @param {string} dataDisplay The data-display property of the button ('dialog', 'submenu', 'command')\r\n     * @param {string} innerHTML Html in button\r\n     * @param {string} _disabled Button disabled\r\n     * @param {Object} _icons Icons\r\n     * @returns {Object}\r\n     * @private\r\n     */\r\n    _createButton: function (buttonClass, title, dataCommand, dataDisplay, innerHTML, _disabled, _icons) {\r\n        const oLi = util.createElement('LI');\r\n        const oButton = util.createElement('BUTTON');\r\n        const label = (title || dataCommand);\r\n\r\n        oButton.setAttribute('type', 'button');\r\n        oButton.setAttribute('class', 'se-btn' + (buttonClass ? ' ' + buttonClass : '') + ' se-tooltip');\r\n        oButton.setAttribute('data-command', dataCommand);\r\n        oButton.setAttribute('data-display', dataDisplay);\r\n        oButton.setAttribute('aria-label', label.replace(/<span .+<\\/span>/, ''));\r\n        oButton.setAttribute('tabindex', '-1');\r\n        \r\n        if (!innerHTML) innerHTML = '<span class=\"se-icon-text\">!</span>';\r\n        if (/^default\\./i.test(innerHTML)) {\r\n            innerHTML = _icons[innerHTML.replace(/^default\\./i, '')];\r\n        }\r\n        if (/^text\\./i.test(innerHTML)) {\r\n            innerHTML = innerHTML.replace(/^text\\./i, '');\r\n            oButton.className += ' se-btn-more-text';\r\n        }\r\n\r\n        innerHTML += '<span class=\"se-tooltip-inner\"><span class=\"se-tooltip-text\">' + label + '</span></span>';\r\n\r\n        if (_disabled) oButton.setAttribute('disabled', true);\r\n        \r\n        oButton.innerHTML = innerHTML;\r\n        oLi.appendChild(oButton);\r\n\r\n        return {\r\n            'li': oLi,\r\n            'button': oButton\r\n        };\r\n    },\r\n\r\n    /**\r\n     * @description Create editor HTML\r\n     * @param {Array} doc document object\r\n     * @param {Array} buttonList option.buttonList\r\n     * @param {Object|null} plugins Plugins\r\n     * @param {Array} options options\r\n     * @returns {Object} { element: (Element) Toolbar element, plugins: (Array|null) Plugins Array, pluginCallButtons: (Object), responsiveButtons: (Array) }\r\n     * @private\r\n     */\r\n    _createToolBar: function (doc, buttonList, plugins, options) {\r\n        const separator_vertical = doc.createElement('DIV');\r\n        separator_vertical.className = 'se-toolbar-separator-vertical';\r\n\r\n        const tool_bar = doc.createElement('DIV');\r\n        tool_bar.className = 'se-toolbar sun-editor-common';\r\n\r\n        const _buttonTray = doc.createElement('DIV');\r\n        _buttonTray.className = 'se-btn-tray';\r\n        tool_bar.appendChild(_buttonTray);\r\n\r\n        /** create button list */\r\n        buttonList = JSON.parse(JSON.stringify(buttonList));\r\n        const icons = options.icons;\r\n        const defaultButtonList = this._defaultButtons(options);\r\n        const pluginCallButtons = {};\r\n        const responsiveButtons = [];\r\n\r\n        let module = null;\r\n        let button = null;\r\n        let moduleElement = null;\r\n        let buttonElement = null;\r\n        let pluginName = '';\r\n        let vertical = false;\r\n        const moreLayer = util.createElement('DIV');\r\n        moreLayer.className = 'se-toolbar-more-layer';\r\n\r\n        buttonGroupLoop:\r\n        for (let i = 0, more, moreContainer, moreCommand, buttonGroup, align; i < buttonList.length; i++) {\r\n            more = false;\r\n            align = '';\r\n            buttonGroup = buttonList[i];\r\n            moduleElement = this._createModuleGroup();\r\n\r\n            // button object\r\n            if (typeof buttonGroup === 'object') {\r\n                // buttons loop\r\n                for (let j = 0, moreButton; j < buttonGroup.length; j++) {\r\n                    button = buttonGroup[j];\r\n                    moreButton = false;\r\n\r\n                    if (/^\\%\\d+/.test(button) && j === 0) {\r\n                        buttonGroup[0] = button.replace(/[^\\d]/g, '');\r\n                        responsiveButtons.push(buttonGroup);\r\n                        buttonList.splice(i--, 1);\r\n                        continue buttonGroupLoop;\r\n                    }\r\n                    \r\n                    if (typeof button === 'object') {\r\n                        if (typeof button.add === 'function') {\r\n                            pluginName = button.name;\r\n                            module = defaultButtonList[pluginName];\r\n                            plugins[pluginName] = button;\r\n                        } else {\r\n                            pluginName = button.name;\r\n                            module = [button.buttonClass, button.title, button.name, button.dataDisplay, button.innerHTML, button._disabled];\r\n                        }\r\n                    } else {\r\n                        // align\r\n                        if (/^\\-/.test(button)) {\r\n                            align = button.substr(1);\r\n                            moduleElement.div.className += ' module-float-' + align;\r\n                            continue;\r\n                        }\r\n\r\n                        // rtl fix\r\n                        if (/^\\#/.test(button)) {\r\n                            const option = button.substr(1);\r\n                            if (option === 'fix') moduleElement.ul.className += ' se-menu-dir-fix';\r\n                            continue;\r\n                        }\r\n                        \r\n                        // more button\r\n                        if (/^\\:/.test(button)) {\r\n                            moreButton = true;\r\n                            const matched = button.match(/^\\:([^\\-]+)\\-([^\\-]+)\\-([^\\-]+)/);\r\n                            moreCommand = '__se__' + matched[1].trim();\r\n                            const title = matched[2].trim();\r\n                            const innerHTML = matched[3].trim();\r\n                            module = ['se-btn-more', title, moreCommand, 'MORE', innerHTML];\r\n                        }\r\n                        // buttons\r\n                        else {\r\n                            module = defaultButtonList[button];\r\n                        }\r\n\r\n                        pluginName = button;\r\n                        if (!module) {\r\n                            const custom = plugins[pluginName];\r\n                            if (!custom) throw Error('[SUNEDITOR.create.toolbar.fail] The button name of a plugin that does not exist. [' + pluginName + ']');\r\n                            module = [custom.buttonClass, custom.title, custom.name, custom.display, custom.innerHTML, custom._disabled];\r\n                        }\r\n                    }\r\n\r\n                    buttonElement = this._createButton(module[0], module[1], module[2], module[3], module[4], module[5], icons);\r\n                    (more ? moreContainer : moduleElement.ul).appendChild(buttonElement.li);\r\n\r\n                    if (plugins[pluginName]) {\r\n                        pluginCallButtons[pluginName] = buttonElement.button;\r\n                    }\r\n\r\n                    // more button\r\n                    if (moreButton) {\r\n                        more = true;\r\n                        moreContainer = util.createElement('DIV');\r\n                        moreContainer.className = 'se-more-layer ' + moreCommand;\r\n                        moreContainer.innerHTML = '<div class=\"se-more-form\"><ul class=\"se-menu-list\"' + (align ? ' style=\"float: ' + align + ';\"' : '') + '></ul></div>';\r\n                        moreLayer.appendChild(moreContainer);\r\n                        moreContainer = moreContainer.firstElementChild.firstElementChild;\r\n                    }\r\n                }\r\n\r\n                if (vertical) {\r\n                    const sv =  separator_vertical.cloneNode(false);\r\n                    _buttonTray.appendChild(sv);\r\n                }\r\n                \r\n                _buttonTray.appendChild(moduleElement.div);\r\n                vertical = true;\r\n            }\r\n            /** line break  */\r\n            else if (/^\\/$/.test(buttonGroup)) {\r\n                const enterDiv = doc.createElement('DIV');\r\n                enterDiv.className = 'se-btn-module-enter';\r\n                _buttonTray.appendChild(enterDiv);\r\n                vertical = false;\r\n            }\r\n        }\r\n\r\n        switch (_buttonTray.children.length) {\r\n            case 0:\r\n                _buttonTray.style.display = 'none';\r\n                break;\r\n            case 1:\r\n                util.removeClass(_buttonTray.firstElementChild, 'se-btn-module-border');\r\n                break;\r\n            default:\r\n                if (options.rtl) {\r\n                    const sv =  separator_vertical.cloneNode(false);\r\n                    sv.style.float = _buttonTray.lastElementChild.style.float;\r\n                    _buttonTray.appendChild(sv);\r\n                }\r\n        }\r\n\r\n        if (responsiveButtons.length > 0) responsiveButtons.unshift(buttonList);\r\n        if (moreLayer.children.length > 0) _buttonTray.appendChild(moreLayer);\r\n\r\n        // menu tray\r\n        const _menuTray = doc.createElement('DIV');\r\n        _menuTray.className = 'se-menu-tray';\r\n        tool_bar.appendChild(_menuTray);\r\n\r\n        // cover\r\n        const tool_cover = doc.createElement('DIV');\r\n        tool_cover.className = 'se-toolbar-cover';\r\n        tool_bar.appendChild(tool_cover);\r\n\r\n        if (options.hideToolbar) tool_bar.style.display = 'none';\r\n\r\n        return {\r\n            'element': tool_bar,\r\n            'plugins': plugins,\r\n            'pluginCallButtons': pluginCallButtons,\r\n            'responsiveButtons': responsiveButtons,\r\n            '_menuTray': _menuTray,\r\n            '_buttonTray': _buttonTray\r\n        };\r\n    }\r\n};"],"mappings":"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"},"metadata":{},"sourceType":"module"}